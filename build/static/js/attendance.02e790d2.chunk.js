"use strict";(self.webpackChunktveta_online=self.webpackChunktveta_online||[]).push([[7779],{47368:function(e,s,t){t.r(s);var r=t(74165),a=t(15861),n=t(29439),l=t(50390),c=t(16295),i=t(32121),d=(t(48907),t(830)),o=t(49360),u=t(31833),x=t(14237),h=t(14778),m=t(64884),j=t(94048),b=t(16778),p=t(37671),Z=t(16905),f=t(39873),k=t(26129),y=t(83882),N=t(62559),v=o.Ry().shape({institute:o.Ry().shape({value:o.Z_().required()}).nullable().required((0,N.jsx)(p.Z,{id:"forms.InstituteErr"})),educationalYear:o.Ry().shape({value:o.Z_().required()}).nullable().required((0,N.jsx)(p.Z,{id:"forms.educationYearErr"})),studyTime:o.Ry().shape({value:o.Z_().required()}).nullable().required((0,N.jsx)(p.Z,{id:"forms.StudyTimeErr"})),classs:o.Ry().shape({value:o.Z_().required()}).nullable().required((0,N.jsx)(p.Z,{id:"marks.ClassErr"})),department:o.Ry().shape({value:o.Z_().required()}).nullable().required((0,N.jsx)(p.Z,{id:"teacher.departmentIdErr"}))}),g={institute:[],educationalYear:[],studyTime:[],classs:[],department:[]};s.default=function(e){e.match;var s=(0,l.useContext)(y.V).institutes,t=(0,l.useState)(!1),o=(0,n.Z)(t,2),S=(o[0],o[1],(0,l.useState)(!1)),C=(0,n.Z)(S,2),F=C[0],w=C[1],L=(0,l.useState)([]),_=(0,n.Z)(L,2),T=_[0],q=_[1],Y=(0,l.useState)([]),I=(0,n.Z)(Y,2),E=I[0],B=I[1],D=(0,l.useState)([]),R=(0,n.Z)(D,2),W=(R[0],R[1]),A=(0,l.useState)([]),V=(0,n.Z)(A,2),P=V[0],z=V[1],G=(0,l.useState)(""),J=(0,n.Z)(G,2),H=J[0],K=J[1],M=(0,l.useState)(""),O=(0,n.Z)(M,2),Q=O[0],U=O[1],X=(0,l.useState)(""),$=(0,n.Z)(X,2),ee=$[0],se=$[1],te=(0,l.useState)(""),re=(0,n.Z)(te,2),ae=(re[0],re[1],(0,l.useState)("")),ne=(0,n.Z)(ae,2),le=ne[0],ce=ne[1],ie=(0,l.useState)(""),de=(0,n.Z)(ie,2),oe=de[0],ue=de[1],xe=(0,l.useState)(55),he=(0,n.Z)(xe,2),me=(he[0],he[1],(0,l.useState)()),je=(0,n.Z)(me,2),be=(je[0],je[1],(0,l.useState)()),pe=(0,n.Z)(be,2),Ze=(pe[0],pe[1],function(){var e=(0,a.Z)((0,r.Z)().mark((function e(s){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&s.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,i.Z)("institute/institite-department/?institute=".concat(s.value),"",null);case 4:if(!(t=e.sent).data||200!==t.status){e.next=14;break}return console.log("response of department",t.data),e.next=9,t.data.map((function(e){return{value:e.department,label:e.department}}));case 9:a=e.sent,console.log("updatedData of department",a),q(a),e.next=15;break;case 14:console.log("department error");case 15:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}()),fe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var s,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.Z)("institute/subject/","",null);case 2:if(!(s=e.sent).data||200!==s.status){e.next=10;break}return e.next=6,s.data.map((function(e){return{value:e.id,label:e.name}}));case 6:t=e.sent,W(t),e.next=11;break;case 10:console.log("subject error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var s,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.Z)("institute/classs/","",null);case 2:if(!(s=e.sent).data||200!==s.status){e.next=10;break}return e.next=6,s.data.map((function(e){return{value:e.id,label:e.name+" - "+e.semester+" - "+e.section}}));case 6:t=e.sent,B(t),e.next=11;break;case 10:console.log("class error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){ke(),fe()}),[]),(0,l.useEffect)((function(){H&&(console.log("selectedInstitute",H),Ze(H))}),[H]);var ye=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.Z)("students/stdattendence_by/?institute=".concat(H.value,"&classs=").concat(ee.value,"&shift=").concat(le.value,"&department=").concat(Q.value,"&educational_year=").concat(oe.value),"GET",null);case 2:s=e.sent,console.log("attendance repspossdfsde",s),s.data&&200===s.status?(z(s.data),console.log("response.data.students",s.data),w(!0)):console.log("attendance error");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(u.Z,{children:[(0,N.jsx)("div",{className:"mt-4 ml-5",children:(0,N.jsx)("h2",{className:" m-5  titleStyle",children:(0,N.jsx)(p.Z,{id:"menu.class_attendance"})})}),(0,N.jsx)(x.Z,{children:F?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(h.Z,{className:"border border bg-primary me-5 p-1 ",style:{marginInline:"10%"},children:[(0,N.jsxs)(Z.F,{xxs:"2",children:[(0,N.jsx)(j.Z,{children:(0,N.jsx)(p.Z,{id:"forms.FieldLabel"})}),console.log("selectedDepartment",Q),(0,N.jsx)("h6",{children:Q.label})]}),(0,N.jsxs)(Z.F,{xxs:"2",children:[(0,N.jsx)(j.Z,{children:(0,N.jsx)(p.Z,{id:"marks.ClassLabel"})}),(0,N.jsx)("h6",{children:ee.label})]}),(0,N.jsxs)(Z.F,{xxs:"2",children:[(0,N.jsx)(j.Z,{children:(0,N.jsx)(p.Z,{id:"forms.StudyTimeLabel"})}),(0,N.jsx)("h6",{children:le.label})]}),(0,N.jsxs)(Z.F,{xxs:"2",children:[(0,N.jsx)(j.Z,{children:(0,N.jsx)(p.Z,{id:"marks.SemesterLabel"})}),(0,N.jsx)("h6",{children:ee.label})]}),(0,N.jsxs)(Z.F,{xxs:"2",children:[(0,N.jsx)(j.Z,{children:(0,N.jsx)(p.Z,{id:"marks.SectionLabel"})}),(0,N.jsx)("h6",{children:ee.label})]})]}),(0,N.jsxs)(h.Z,{className:"justify-content-center  border border",style:{marginInline:"10%"},children:[P.length>0?(0,N.jsxs)("table",{className:"table",children:[(0,N.jsx)("thead",{className:"thead-dark ",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{colspan:"4",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"marks.studentChar"})}),(0,N.jsx)("th",{colspan:"4",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"marks.marksDisplayTitle"})})]})}),(0,N.jsx)("thead",{className:"thead-dark",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{scope:"col",className:"border text-center ",style:{maxWidth:"20px ",minWidth:"50px"},children:(0,N.jsx)(p.Z,{id:"marks.No"})}),(0,N.jsx)("th",{scope:"col",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"marks.FullName"})}),(0,N.jsx)("th",{scope:"col",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"marks.FatherName"})}),(0,N.jsx)("th",{scope:"col",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"marks.ID"})}),(0,N.jsx)("th",{scope:"col",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"forms.StdPresentLabel"})}),(0,N.jsx)("th",{scope:"col",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"forms.StdAbsentLabel"})}),(0,N.jsx)("th",{scope:"col",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"forms.StdNecessaryWorkLabel"})}),(0,N.jsx)("th",{scope:"col",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"forms.StdSicknessLabel"})})]})}),(0,N.jsx)("tbody",{children:P.map((function(e,s){return(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{scope:"row",children:s+1}),(0,N.jsx)("td",{children:e.student.name}),(0,N.jsx)("td",{children:e.student.father_name}),(0,N.jsx)("td",{children:e.student.student_id}),(0,N.jsx)("td",{children:e.present_hours}),(0,N.jsx)("td",{children:e.absent_hours}),(0,N.jsx)("td",{children:e.necessary_work_hours}),(0,N.jsx)("td",{children:e.sickness_hours})]})}))})]}):(0,N.jsx)(k.Z,{type:"error",message:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0634\u062a\u0648\u0646 \u0646\u0644\u0631\u06cc"}),(0,N.jsx)("table",{class:"table",children:(0,N.jsx)("tbody",{className:"border"})})]}),(0,N.jsx)(h.Z,{className:"justify-content-center  border border",style:{marginInline:"10%"},children:(0,N.jsx)("table",{class:"table ",children:(0,N.jsx)("tfoot",{className:"thead-dark",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{scope:"col",className:"border text-center ",style:{maxWidth:"20px ",minWidth:"50px"},children:(0,N.jsx)(p.Z,{id:"marks.No"})}),(0,N.jsx)("th",{scope:"col",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"marks.FullName"})}),(0,N.jsx)("th",{scope:"col",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"marks.FatherName"})}),(0,N.jsx)("th",{scope:"col",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"marks.ID"})}),(0,N.jsx)("th",{scope:"col",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"forms.StdPresentLabel"})}),(0,N.jsx)("th",{scope:"col",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"forms.StdAbsentLabel"})}),(0,N.jsx)("th",{scope:"col",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"forms.StdNecessaryWorkLabel"})}),(0,N.jsx)("th",{scope:"col",className:"border text-center",children:(0,N.jsx)(p.Z,{id:"forms.StdSicknessLabel"})})]})})})}),(0,N.jsx)(h.Z,{className:" justify-content-center",children:(0,N.jsx)(Z.F,{xxs:"9",className:"m-5",children:(0,N.jsx)(b.Z,{className:" m-4",onClick:function(){return w(!1)},children:(0,N.jsx)(p.Z,{id:"button.Back"})})})})]}):(0,N.jsx)(c.J9,{initialValues:g,onSubmit:ye,validationSchema:v,children:function(e){var t=e.errors,r=e.touched,a=e.values,n=e.setFieldTouched,l=e.setFieldValue;return(0,N.jsxs)(c.l0,{className:"av-tooltip tooltip-label-right style ",children:[(0,N.jsxs)(h.Z,{className:"m-5",children:[(0,N.jsxs)(Z.F,{xxs:"6",children:[(0,N.jsxs)(m.Z,{className:"form-group has-float-label error-l-150 ",children:[(0,N.jsxs)(j.Z,{children:[(0,N.jsx)(p.Z,{id:"forms.InstituteLabel"}),(0,N.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,N.jsx)(f.ju,{name:"institute",id:"institute",value:a.institute,options:s,onChange:l,onBlur:n,onClick:K(a.institute)}),t.institute&&r.institute?(0,N.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white messageStyle ",children:t.institute}):null]}),(0,N.jsxs)(m.Z,{className:"form-group has-float-label mt-5  error-l-150",children:[(0,N.jsxs)(j.Z,{children:[(0,N.jsx)(p.Z,{id:"forms.StudyTimeLabel"}),(0,N.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,N.jsx)(f.ju,{name:"studyTime",id:"studyTime",value:a.studyTime,options:d.Zp,onChange:l,onBlur:n,onClick:ce(a.studyTime)}),t.studyTime&&r.studyTime?(0,N.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white messageStyle",children:t.studyTime}):null]}),(0,N.jsxs)(m.Z,{className:"form-group has-float-label mt-5  error-l-150",children:[(0,N.jsx)(j.Z,{children:(0,N.jsx)(p.Z,{id:"forms.educationYearLabel"})}),(0,N.jsx)(f.ju,{name:"educationalYear",id:"educationalYear",options:d.Ar,onChange:l,onBlur:n,onClick:ue(a.educationalYear)}),t.educationalYear&&r.educationalYear?(0,N.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:t.educationalYear}):null]})]}),(0,N.jsxs)(Z.F,{xxs:"6",children:[(0,N.jsxs)(m.Z,{className:"form-group has-float-label error-l-150 ",children:[(0,N.jsxs)(j.Z,{children:[(0,N.jsx)(p.Z,{id:"marks.ClassLabel"}),(0,N.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,N.jsx)(f.ju,{name:"classs",id:"classs",value:a.classs,options:E,onChange:l,onBlur:n,onClick:se(a.classs),required:!0}),t.classs&&r.classs?(0,N.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white messageStyle",children:t.classs}):null]}),(0,N.jsxs)(m.Z,{className:"form-group has-float-label mt-5 error-l-150",children:[(0,N.jsxs)(j.Z,{children:[(0,N.jsx)(p.Z,{id:"forms.studyDepartment"}),(0,N.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,N.jsx)(f.ju,{name:"department",id:"department",value:a.department,options:T,onChange:l,onBlur:n,onClick:U(a.department),required:!0}),t.department&&r.department?(0,N.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white messageStyle",children:t.department}):null]})]})]}),(0,N.jsx)(h.Z,{children:(0,N.jsx)(Z.F,{children:(0,N.jsx)(b.Z,{color:"primary",className:"float-right buttonStyle",size:"lg",type:"submit",style:{margin:"3% 0% 9% 8%"},children:(0,N.jsx)("span",{className:"label",children:(0,N.jsx)(p.Z,{id:"button.Next"})})})})})]})}})})]})})}}}]);
//# sourceMappingURL=attendance.02e790d2.chunk.js.map