"use strict";(self.webpackChunktveta_online=self.webpackChunktveta_online||[]).push([[5998],{39873:function(e,n,t){t.d(n,{T5:function(){return v},ju:function(){return d},qu:function(){return f}});var i=t(1413),a=t(45987),r=(t(50390),t(91619)),l=t(37671),o=(t(65620),t(89538),t(11216),t(78112),t(21404)),u=(t(68639),t(57298)),s=t(62559),c=["name","value","onChange","onBlur"],d=function(e){var n=e.name,t=e.value,i=e.options,a=e.isMulti,o=e.className,u=e.onChange,c=e.onBlur,d=(e.onClick,e.defaultValue),v=e.isDisabled,f=e.isLoading,p=e.isClearable,g=e.isRtl,h=e.isSearchable,m=e.placeholder;return(0,s.jsx)(r.ZP,{className:"react-select ".concat(o),classNamePrefix:"react-select",placeholder:m||(0,s.jsx)(l.Z,{id:"forms.EducationLevelDefaultValue"}),options:i,isMulti:a,initial:!0,onChange:function(e){u(n,e)},onBlur:function(){c(n,!0)},value:t,defaultValue:d,isDisabled:v,isLoading:f,isClearable:p,isRtl:g,isSearchable:h})},v=function(e){var n=e.name,t=e.value,r=e.onChange,l=(e.onBlur,(0,a.Z)(e,c));return(0,s.jsx)(u.Z,(0,i.Z)({name:n,value:t,onChange:r,style:{height:48,borderRadius:0}},l))},f=function(e){var n=e.name,t=e.value,i=e.className,a=e.onChange,r=e.onBlur;return(0,s.jsx)(o.ZP,{name:n,className:i,selected:t,onChange:function(e){a(n,e)},onBlur:function(e){r(n,!0)}})}},95414:function(e,n,t){var i=t(28563),a=t.n(i),r=t(50390);n.Z=function(e,n){var t=(0,r.useRef)(null);t.current=n,(0,r.useEffect)((function(){return a().bind(e,(function(e,n){"function"===typeof t.current&&t.current(e,n),e.preventDefault()})),function(){a().unbind(e)}}),[e])}},6220:function(e,n,t){t.r(n);t(93433);var i=t(74165),a=t(15861),r=t(1413),l=t(29439),o=t(50390),u=t(830),s=t(32121),c=t(16295),d=t(39873),v=t(94149),f=t(7556),p=t(6369),g=t(23423),h=t(95414),m=t(83882),x=t(95879),Z=t(62559);n.default=function(e){e.match,e.roles;var n=(0,o.useContext)(m.V),t=n.user,b=n.provinces,w=n.districts,S=(0,o.useState)(1),j=(0,l.Z)(S,2),y=(j[0],j[1],(0,o.useState)(20)),C=(0,l.Z)(y,2),T=(C[0],C[1],(0,o.useState)([])),k=(0,l.Z)(T,2),I=k[0],N=k[1],B=(0,o.useState)([]),z=(0,l.Z)(B,2),_=z[0],D=z[1],O=(0,o.useState)([]),P=(0,l.Z)(O,2),F=P[0],G=P[1],E=(0,o.useState)(null),L=(0,l.Z)(E,2),R=(L[0],L[1],(0,o.useState)({pagination:{current:1,pageSize:5}})),V=(0,l.Z)(R,2),q=V[0],M=V[1],A=(0,o.useState)([]),J=(0,l.Z)(A,2),U=J[0],H=J[1],X=(0,o.useState)([]),K=(0,l.Z)(X,2),Q=(K[0],K[1]),W=(0,o.useState)(!1),Y=(0,l.Z)(W,2),$=Y[0],ee=Y[1],ne=(0,o.useState)(!1),te=(0,l.Z)(ne,2),ie=te[0],ae=te[1],re=(0,o.useState)([]),le=(0,l.Z)(re,2),oe=le[0],ue=le[1],se=[{title:"\u0646\u0645\u0628\u0631 \u0627\u0633\u0627\u0633",dataIndex:"number",width:"5%",responsive:["sm"]},{title:"\u0646\u0648\u0645/\u0646\u0627\u0645",dataIndex:"name",width:"22%",responsive:["sm"]},{title:"\u0648\u0644\u0627\u06cc\u062a",dataIndex:"province",width:"10%"},{title:"\u0648\u0644\u0633\u0648\u0627\u0644\u06cc/\u062a\u0627\u062d\u06cc\u0647",dataIndex:"district",width:"15%",responsive:["sm"]},{title:"\u0638\u0631\u0641\u06cc\u062a",dataIndex:"capacity",width:"10%"},{title:"\u0633\u0647\u0645\u06cc\u0647",dataIndex:"quota",width:"10%"},{title:"\u062c\u0646\u0633\u06cc\u062a",dataIndex:"gender",width:"10%",responsive:["sm"]},{title:"\u062f \u062a\u0639\u0645\u06cc\u0631 \u0689\u0648\u0644",dataIndex:"building_ownership",width:"10%"},{title:"\u0627\u067e\u0689\u06cc\u067c",dataIndex:"action"}],ce=[x.xZ.dormManager,x.xZ.provinceDataentry,x.xZ.admin];t.groups.filter((function(e){return ce.includes(e.name)}))||se.pop();var de=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var t,a,l,o,u,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee(!0),M((0,r.Z)((0,r.Z)({},q),{},{pagination:(0,r.Z)((0,r.Z)({},q.pagination),{},{current:1})})),(s={page:1}).building_ownership=null===(t=n.filterOwnership)||void 0===t?void 0:t.value,s.province=null===(a=n.filterProvince)||void 0===a?void 0:a.value,s.district=null===(l=n.filterDistrict)||void 0===l?void 0:l.value,s.gender=null===(o=n.filterGender)||void 0===o?void 0:o.value,s.status=null===(u=n.filterStatus)||void 0===u?void 0:u.value,s.id=n.filterId||null,pe(s);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ve=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Z)("institute/all","",null);case 2:if(!(n=e.sent).data||200!==n.status){e.next=11;break}return e.next=6,null===n||void 0===n?void 0:n.data.map((function(e){return{id:e.id,name:e.name,label:e.name}}));case 6:t=e.sent,H(t),console.log("dormsFilterList",U),e.next=12;break;case 11:console.log("error");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,t,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Z)("core/provinces/","GET",null);case 2:if(!(n=e.sent).data||200!==n.status){e.next=12;break}return e.next=6,n.data.map((function(e){return{value:e.id,label:e.native_name}}));case 6:t=e.sent,a={value:"all",label:"\u0647\u0645\u0647"},t.unshift(a),Q(t),e.next=13;break;case 12:console.log("province error");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function pe(){return ge.apply(this,arguments)}function ge(){return ge=(0,a.Z)((0,i.Z)().mark((function e(){var n,t,a,l,o,u=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>0&&void 0!==u[0]?u[0]:{},console.log("PARAMSSSSSSSSSS: ",n),ae(!0),"institute/dorms/",t=(0,r.Z)((0,r.Z)({},n),{},{page:$?n.page:q.pagination.current,page_size:q.pagination.pageSize||null}),e.prev=5,e.next=8,(0,s.Z)("institute/dorms/",null,null,t);case 8:a=e.sent,ae(!1),a.data&&200===a.status?(D(null===(l=a.data)||void 0===l?void 0:l.results),M((0,r.Z)((0,r.Z)({},q),{},{pagination:(0,r.Z)((0,r.Z)({},q.pagination),{},{total:null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.count})}))):console.log("students error"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.log("error: ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])}))),ge.apply(this,arguments)}(0,o.useEffect)((function(){ve(),fe()}),[]),(0,o.useEffect)((function(){pe()}),[$?null:JSON.stringify(q)]);(0,h.Z)(["ctrl+a","command+a"],(function(){var e;e=!1,I.length>=F.length?e&&N([]):N(F.map((function(e){return e.id}))),document.activeElement.blur()})),(0,h.Z)(["ctrl+d","command+d"],(function(){return N([]),!1}));return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)("div",{className:"disable-text-selection",children:[(0,Z.jsx)("h1",{children:"\u062f \u0644\u06cc\u0644\u06cc\u0648 \u0644\u0633\u062a/ \u0644\u0633\u062a \u0644\u06cc\u0644\u0647 \u0647\u0627"}),(0,Z.jsx)("div",{style:{padding:10,display:"flex"},children:(0,Z.jsx)(c.J9,{initialValues:{filterId:"",filterInstitute:[],filterProvince:[]},onSubmit:de,children:function(e){var n=e.values,t=e.setFieldValue,i=e.handleSubmit,a=e.setFieldTouched,r=e.resetForm;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(c.gN,{name:"filterId",placeholder:"\u0627\u06cc\u062f\u06cc"}),(0,Z.jsx)(d.ju,{className:"w-100",placeholder:"\u0648\u0644\u0627\u06cc\u062a",name:"filterProvince",options:b,value:n.filterProvince,onChange:function(e,n){t(e,n);var i=w.filter((function(e){return e.province===n.value}));ue(i)},onBlur:a}),(0,Z.jsx)(d.ju,{className:"w-100",placeholder:"\u0648\u0644\u0633\u0648\u0627\u0644\u06cc",name:"filterDistrict",options:oe,value:n.filterDistrict,onChange:t,onBlur:a}),(0,Z.jsx)(d.ju,{className:"w-100",placeholder:"\u0646\u0648\u0639\u06cc\u062a",name:"filterOwnership",options:u._c,value:n.filterOwnership,onChange:t,onBlur:a}),(0,Z.jsx)(d.ju,{className:"w-100",placeholder:"\u062c\u0646\u0633\u06cc\u062a",name:"filterGender",options:u.UG,value:n.filterGender,onChange:t,onBlur:a}),(0,Z.jsx)("button",{className:"btn btn-secondary",onClick:i,children:"Filter"}),(0,Z.jsx)("button",{type:"button",className:"btn btn-warning",onClick:function(){return function(e){e({values:{filterId:"",filterInstitute:[],filterProvince:[],filterOwnership:[],filterDistrict:[]}}),ue([]),ee(!1),pe()}(r)},children:"Reset"})]})}})}),console.log("ITTTTTTTTTTTTTTTTTT",_),(0,Z.jsx)(f.Z,{style:{fontSize:20},size:"large",columns:se,pagination:q.pagination,onChange:function(e,n,t){var i;ee(!1),M((0,r.Z)({pagination:e,filter:n},t)),e.pageSize!==(null===(i=q.pagination)||void 0===i?void 0:i.pageSize)&&G([])},loading:ie,dataSource:null===_||void 0===_?void 0:_.map((function(e,n){var t,i,a;return{key:null===e||void 0===e?void 0:e.id,number:null===e||void 0===e?void 0:e.id,name:(0,Z.jsx)(p.OL,{to:"dorm/".concat(null===e||void 0===e?void 0:e.id),style:{width:"10%"},children:null===e||void 0===e?void 0:e.name}),province:null===(t=b.find((function(n){return n.value==(null===e||void 0===e?void 0:e.province)})))||void 0===t?void 0:t.label,district:null===(i=w.find((function(n){return n.value==(null===e||void 0===e?void 0:e.district)})))||void 0===i?void 0:i.label,gender:null===(a=u.UG.find((function(n){return n.value==(null===e||void 0===e?void 0:e.gender)})))||void 0===a?void 0:a.label,capacity:e.capacity,quota:e.quota,building_ownership:u._c.find((function(n){return n.value===e.building_ownership})).label,status:u.GA.map((function(n){if(n.value==(null===e||void 0===e?void 0:e.status))return(0,Z.jsx)("div",{className:"mb-1 text-small",style:{fontSize:"20px",width:"10%"},children:(0,Z.jsx)(v.Z,{color:"dismissed"==n.value?"danger":"inprogress"==n.value||"active"==n.value?"success":"freeze"==n.value?"secondary":"warning",pill:!0,children:n.label})})})),action:(0,Z.jsx)(p.OL,{to:"register/".concat(null===e||void 0===e?void 0:e.id),children:(0,Z.jsx)("div",{children:(0,Z.jsx)(g.HlX,{color:"green",outline:!0,style:{fontSize:"20px"},id:"updateIcon"})})})}}))})]})})}},86280:function(e,n,t){t.d(n,{o2:function(){return o},yT:function(){return u}});var i=t(93433),a=t(59539),r=a.i.map((function(e){return"".concat(e,"-inverse")})),l=["success","processing","error","default","warning"];function o(e){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?[].concat((0,i.Z)(r),(0,i.Z)(a.i)).includes(e):a.i.includes(e)}function u(e){return l.includes(e)}},59539:function(e,n,t){t.d(n,{i:function(){return i}});var i=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]},57635:function(e,n,t){t.d(n,{Z:function(){return a}});var i=t(59539);function a(e,n){return i.i.reduce((function(t,i){var a=e["".concat(i,"1")],r=e["".concat(i,"3")],l=e["".concat(i,"6")],o=e["".concat(i,"7")];return Object.assign(Object.assign({},t),n(i,{lightColor:a,lightBorderColor:r,darkColor:l,textColor:o}))}),{})}}}]);
//# sourceMappingURL=dorm-list.51bc156f.chunk.js.map