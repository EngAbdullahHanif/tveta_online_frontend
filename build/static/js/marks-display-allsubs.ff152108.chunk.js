"use strict";(self.webpackChunktveta_online=self.webpackChunktveta_online||[]).push([[7140],{7562:function(e,t,s){s.r(t);var a=s(4942),r=s(1413),n=s(74165),l=s(15861),i=s(29439),c=s(50390),u=s(16295),d=s(32121),o=s(830),x=(s(48907),s(49360)),m=s(31833),h=s(14237),j=s(14778),Z=s(64884),p=s(94048),f=s(16778),b=s(37671),v=s(16905),g=s(39873),k=s(26129),y=s(83882),N=s(62559),S=x.Ry().shape({institute:x.Ry().shape({value:x.Z_().required()}).nullable().required((0,N.jsx)(b.Z,{id:"forms.InstituteErr"})),educationalYear:x.Ry().shape({value:x.Z_().required()}).nullable().required((0,N.jsx)(b.Z,{id:"forms.educationYearErr"})),studyTime:x.Ry().shape({value:x.Z_().required()}).nullable().required((0,N.jsx)(b.Z,{id:"forms.StudyTimeErr"})),classs:x.Ry().shape({value:x.Z_().required()}).nullable().required((0,N.jsx)(b.Z,{id:"marks.ClassErr"})),department:x.Ry().shape({value:x.Z_().required()}).nullable().required((0,N.jsx)(b.Z,{id:"teacher.departmentIdErr"}))});t.default=function(e){e.match;var t=(0,c.useContext)(y.V).institutes,s=(0,c.useState)(!1),x=(0,i.Z)(s,2),w=(x[0],x[1],(0,c.useState)(!0)),C=(0,i.Z)(w,2),F=C[0],T=C[1],q=(0,c.useState)([]),Y=(0,i.Z)(q,2),I=(Y[0],Y[1]),L=(0,c.useState)([]),_=(0,i.Z)(L,2),E=_[0],B=_[1],R=(0,c.useState)([]),D=(0,i.Z)(R,2),V=D[0],H=D[1],X=(0,c.useState)([]),z=(0,i.Z)(X,2),A=(z[0],z[1]),J=(0,c.useState)([]),O=(0,i.Z)(J,2),W=O[0],G=O[1],K=(0,c.useState)([]),M=(0,i.Z)(K,2),P=M[0],Q=M[1],U=(0,c.useState)(""),$=(0,i.Z)(U,2),ee=$[0],te=$[1],se=(0,c.useState)(""),ae=(0,i.Z)(se,2),re=ae[0],ne=ae[1],le=(0,c.useState)(""),ie=(0,i.Z)(le,2),ce=ie[0],ue=ie[1],de=(0,c.useState)(""),oe=(0,i.Z)(de,2),xe=(oe[0],oe[1],(0,c.useState)("")),me=(0,i.Z)(xe,2),he=me[0],je=me[1],Ze=(0,c.useState)(""),pe=(0,i.Z)(Ze,2),fe=pe[0],be=pe[1],ve=(0,c.useState)(55),ge=(0,i.Z)(ve,2),ke=(ge[0],ge[1],(0,c.useState)()),ye=(0,i.Z)(ke,2),Ne=(ye[0],ye[1],(0,c.useState)()),Se=(0,i.Z)(Ne,2),we=(Se[0],Se[1],(0,c.useState)()),Ce=(0,i.Z)(we,2),Fe=Ce[0],Te=Ce[1],qe=(0,c.useState)(),Ye=(0,i.Z)(qe,2),Ie=Ye[0],Le=Ye[1],_e=(0,c.useState)(),Ee=(0,i.Z)(_e,2),Be=Ee[0],Re=Ee[1],De=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var t,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Z)("institute/field/","",null);case 2:if(!(t=e.sent).data||200!==t.status){e.next=10;break}return e.next=6,t.data.map((function(e){return{value:e.id,label:e.name}}));case 6:s=e.sent,I(s),e.next=11;break;case 10:console.log("field error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ve=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(t){var s,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,d.Z)("institute/institite-department/?institute=".concat(t.value),"",null);case 4:if(!(s=e.sent).data||200!==s.status){e.next=14;break}return console.log("response of department",s),e.next=9,s.data.map((function(e){return{value:e.department,label:e.department}}));case 9:a=e.sent,console.log("updatedData of department",a),B(a),e.next=15;break;case 14:console.log("department error");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var t,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Z)("institute/classs/","",null);case 2:if(!(t=e.sent).data||200!==t.status){e.next=10;break}return e.next=6,t.data.map((function(e){return{value:e.id,label:e.name+" - "+e.semester+" - "+e.section}}));case 6:s=e.sent,H(s),e.next=11;break;case 10:console.log("class error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var t,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Z)("institute/subject/","",null);case 2:if(!(t=e.sent).data||200!==t.status){e.next=10;break}return e.next=6,t.data.map((function(e){return{value:e.id,label:e.name}}));case 6:s=e.sent,A(s),e.next=11;break;case 10:console.log("subject error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){De(),He(),Xe()}),[]),(0,c.useEffect)((function(){ee&&(console.log("selectedInstitute",ee),Ve(ee))}),[ee]);var ze=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(t){var s,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Z)("students/class_marks?institute=".concat(ee.value,"&classs=").concat(ce.value,"&shift=").concat(he.value,"&department=").concat(re.value,"&educational_year=").concat(fe.value),"",null);case 2:(s=e.sent).data&&200===s.status?(T(!1),G(s.data),Q(s.data[0]),console.log("response.data ",s.data),a=ce.label.split(" - "),Te(a[0]),Le(a[1]),Re(a[2])):console.log("students error");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=(0,c.useState)(W.reduce((function(e,t,s){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},s,!1))}),{})),Je=(0,i.Z)(Ae,2),Oe=Je[0],We=(Je[1],(0,c.useState)(!1)),Ge=(0,i.Z)(We,2),Ke=(Ge[0],Ge[1]);return(0,c.useEffect)((function(){Ke(Object.values(Oe).every(Boolean))}),[Oe]),console.log(Oe,"Item is checked"),(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(m.Z,{children:[(0,N.jsx)("div",{className:"mt-4 ml-5",children:(0,N.jsx)("h2",{className:"mt-5 m-5 titleStyle",children:(0,N.jsx)(b.Z,{id:"marks.marksDisplayTitle"})})}),(0,N.jsx)(h.Z,{children:F?(0,N.jsx)(u.J9,{initialValues:{institute:[],educationlaYear:"",studyTime:[],classs:[],department:[]},validationSchema:S,onSubmit:ze,children:function(e){var s=e.errors,a=e.touched,r=e.values,n=e.setFieldTouched,l=e.setFieldValue;return(0,N.jsxs)(u.l0,{className:"av-tooltip tooltip-label-right  style",children:[(0,N.jsxs)(j.Z,{className:"m-5",children:[(0,N.jsxs)(v.F,{xxs:"6",children:[(0,N.jsxs)(Z.Z,{className:"form-group has-float-label error-l-150  ",children:[(0,N.jsx)(p.Z,{children:(0,N.jsx)(b.Z,{id:"forms.InstituteLabel"})}),(0,N.jsx)(g.ju,{name:"institute",id:"institute",value:r.institute,options:t,onChange:l,onBlur:n,onClick:te(r.institute)}),s.institute&&a.institute?(0,N.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white",children:s.institute}):null]}),(0,N.jsxs)(Z.Z,{className:"form-group has-float-label mt-5  error-l-150",children:[(0,N.jsx)(p.Z,{children:(0,N.jsx)(b.Z,{id:"forms.StudyTimeLabel"})}),(0,N.jsx)(g.ju,{name:"studyTime",id:"studyTime",value:r.studyTime,options:o.Zp,onChange:l,onBlur:n,onClick:je(r.studyTime)}),s.studyTime&&a.studyTime?(0,N.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white",children:s.studyTime}):null]}),(0,N.jsxs)(Z.Z,{className:"form-group has-float-label mt-5  error-l-150",children:[(0,N.jsx)(p.Z,{children:(0,N.jsx)(b.Z,{id:"forms.educationYearLabel"})}),(0,N.jsx)(g.ju,{name:"educationalYear",id:"educationalYear",options:o.Ar,onChange:l,onBlur:n,onClick:be(r.educationalYear)}),s.educationalYear&&a.educationalYear?(0,N.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:s.educationalYear}):null]})]}),(0,N.jsxs)(v.F,{xxs:"6",children:[(0,N.jsxs)(Z.Z,{className:"form-group has-float-label error-l-150 ",children:[(0,N.jsx)(p.Z,{children:(0,N.jsx)(b.Z,{id:"marks.ClassLabel"})}),(0,N.jsx)(g.ju,{name:"classs",id:"classs",value:r.classs,options:V,onChange:l,onBlur:n,onClick:ue(r.classs),required:!0}),s.classs&&a.classs?(0,N.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white",children:s.classs}):null]}),(0,N.jsxs)(Z.Z,{className:"form-group has-float-label mt-5 error-l-150",children:[(0,N.jsx)(p.Z,{children:(0,N.jsx)(b.Z,{id:"forms.studyDepartment"})}),(0,N.jsx)(g.ju,{name:"department",id:"department",value:r.department,options:E,onChange:l,onBlur:n,onClick:ne(r.department),required:!0}),s.department&&a.department?(0,N.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white",children:s.department}):null]})]})]}),(0,N.jsx)(j.Z,{children:(0,N.jsx)(v.F,{children:(0,N.jsx)(f.Z,{color:"primary",className:"float-right m-5",size:"lg",type:"submit",children:(0,N.jsx)("span",{className:"label",children:(0,N.jsx)(b.Z,{id:"button.Next"})})})})})]})}}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(j.Z,{className:"border border bg-primary me-5 p-1 ",style:{marginInline:"2%"},children:[(0,N.jsxs)(v.F,{xxs:"2",children:[(0,N.jsx)(p.Z,{children:(0,N.jsx)(b.Z,{id:"forms.FieldLabel"})}),console.log("selectedDepartment",re),(0,N.jsx)("h6",{children:re.label})]}),(0,N.jsxs)(v.F,{xxs:"2",children:[(0,N.jsx)(p.Z,{children:(0,N.jsx)(b.Z,{id:"marks.ClassLabel"})}),(0,N.jsx)("h6",{children:Fe})]}),(0,N.jsxs)(v.F,{xxs:"2",children:[(0,N.jsx)(p.Z,{children:(0,N.jsx)(b.Z,{id:"forms.StudyTimeLabel"})}),(0,N.jsx)("h6",{children:he.label})]}),(0,N.jsxs)(v.F,{xxs:"2",children:[(0,N.jsx)(p.Z,{children:(0,N.jsx)(b.Z,{id:"marks.SemesterLabel"})}),(0,N.jsx)("h6",{children:Ie})]}),(0,N.jsxs)(v.F,{xxs:"2",children:[(0,N.jsx)(p.Z,{children:(0,N.jsx)(b.Z,{id:"marks.SectionLabel"})}),(0,N.jsx)("h6",{children:Be})]})]}),(0,N.jsx)(j.Z,{style:{marginInline:"2%",maxWidth:"97%",maxHeight:"900px",overflowX:"auto",overflowY:"auto"},children:W.length>0?(0,N.jsxs)("table",{className:"table",striped:!0,children:[(0,N.jsx)("thead",{className:"thead-dark ",style:{marginInline:"2%"},children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{colspan:"3",className:"border text-center",children:(0,N.jsx)(b.Z,{id:"marks.studentChar"})}),(0,N.jsx)("th",{colspan:P.length-3,className:"border text-center",children:(0,N.jsx)(b.Z,{id:"marks.marksDisplayTitle"})})," "]})}),(0,N.jsx)("thead",{className:"thead-dark border  text-center",style:{marginInline:"5%"},children:(0,N.jsx)("tr",{children:P.map((function(e,t){return(0,N.jsx)("th",{className:"border  text-center",children:e.name},t)}))})}),(0,N.jsx)("tbody",{className:"border border ",style:{maxHeight:"500px",overflowY:"scroll",overflowX:"hidden"},children:W.map((function(e,t){return(0,N.jsx)("tr",{children:0==!t?(0,N.jsx)(N.Fragment,{children:e.map((function(e,t){return(0,N.jsx)(N.Fragment,{children:0===t||1===t||2===t?(0,N.jsx)("td",{scope:"col",className:"border text-center ",children:e.name}):(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("td",{scope:"col",className:"border text-center ",children:e.score})})})}))}):null},t)}))}),(0,N.jsx)("tfoot",{className:"thead-dark",style:{marginInline:"5%"},children:(0,N.jsx)("tr",{children:P.map((function(e,t){return(0,N.jsx)("th",{className:"border  text-center",children:e.name},t)}))})})]}):(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(k.Z,{type:"error",message:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0634\u062a\u0648\u0646 \u0646\u0644\u0631\u06cc"})})}),(0,N.jsx)(j.Z,{className:" justify-content-center",children:(0,N.jsx)(v.F,{xxs:"12",className:"m-5",children:(0,N.jsx)(f.Z,{className:" m-4",onClick:function(){return T(!0)},children:(0,N.jsx)(b.Z,{id:"button.Back"})})})})]})})]})})}}}]);
//# sourceMappingURL=marks-display-allsubs.ff152108.chunk.js.map