"use strict";(self.webpackChunktveta_online=self.webpackChunktveta_online||[]).push([[4092],{83737:function(e,t,s){s.r(t);var n=s(4942),r=s(1413),a=s(74165),l=s(15861),i=s(29439),c=s(50390),o=s(16295),u=s(45133),d=s.n(u),x=s(14037),h=s(32121),m=s(830),f=(s(48907),s(49360)),j=s(31833),p=s(14237),Z=s(14778),b=s(64884),v=s(94048),g=s(16778),k=s(22834),y=s(37671),S=s(16905),N=s(39873),w=s(62559),z=f.Ry().shape({institute:f.Ry().shape({value:f.Z_().required()}).nullable().required((0,w.jsx)(y.Z,{id:"forms.InstituteErr"})),educationalYear:f.Ry().shape({value:f.Z_().required()}).nullable().required((0,w.jsx)(y.Z,{id:"forms.educationYearErr"})),studyTime:f.Ry().shape({value:f.Z_().required()}).nullable().required((0,w.jsx)(y.Z,{id:"forms.StudyTimeErr"})),classs:f.Ry().shape({value:f.Z_().required()}).nullable().required((0,w.jsx)(y.Z,{id:"marks.ClassErr"})),department:f.Ry().shape({value:f.Z_().required()}).nullable().required((0,w.jsx)(y.Z,{id:"teacher.departmentIdErr"})),subject:f.Ry().shape({value:f.Z_().required()}).nullable().required((0,w.jsx)(y.Z,{id:"marks.SubjectErr"}))}),C={institute:[],educationalYear:[],studyTime:[],classs:[],department:[],subject:[],marks:0};t.default=function(e){e.match;var t=(0,c.useState)(!1),s=(0,i.Z)(t,2),u=s[0],f=s[1],F=(0,c.useState)(0),I=(0,i.Z)(F,2),_=(I[0],I[1],(0,c.useState)(!1)),q=(0,i.Z)(_,2),A=q[0],T=q[1],Y=(0,c.useState)([]),E=(0,i.Z)(Y,2),L=(E[0],E[1]),B=(0,c.useState)([]),R=(0,i.Z)(B,2),W=R[0],D=R[1],V=(0,c.useState)([]),J=(0,i.Z)(V,2),M=J[0],O=J[1],P=(0,c.useState)([]),X=(0,i.Z)(P,2),G=X[0],U=X[1],H=(0,c.useState)([]),K=(0,i.Z)(H,2),Q=K[0],$=K[1],ee=(0,c.useState)([]),te=(0,i.Z)(ee,2),se=te[0],ne=te[1],re=(0,c.useState)(),ae=(0,i.Z)(re,2),le=ae[0],ie=ae[1],ce=(0,c.useState)(""),oe=(0,i.Z)(ce,2),ue=oe[0],de=oe[1],xe=(0,c.useState)(""),he=(0,i.Z)(xe,2),me=he[0],fe=he[1],je=(0,c.useState)(""),pe=(0,i.Z)(je,2),Ze=pe[0],be=pe[1],ve=(0,c.useState)(""),ge=(0,i.Z)(ve,2),ke=ge[0],ye=ge[1],Se=(0,c.useState)(""),Ne=(0,i.Z)(Se,2),we=Ne[0],ze=Ne[1],Ce=(0,c.useState)(55),Fe=(0,i.Z)(Ce,2),Ie=(Fe[0],Fe[1],(0,c.useState)()),_e=(0,i.Z)(Ie,2),qe=(_e[0],_e[1],(0,c.useState)()),Ae=(0,i.Z)(qe,2),Te=(Ae[0],Ae[1],(0,c.useState)()),Ye=(0,i.Z)(Te,2),Ee=(Ye[0],Ye[1],(0,x.useParams)().markId),Le=(0,c.useState)({}),Be=(0,i.Z)(Le,2),Re=Be[0],We=Be[1],De=(0,c.useState)({classs:"",semester:"",section:""}),Ve=(0,i.Z)(De,2),Je=Ve[0],Me=Ve[1];function Oe(){return(Oe=(0,l.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d().get("".concat(1,"/?student_id=",Ee));case 2:t=e.sent,t.data;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,c.useEffect)((function(){if(!(0,o.yD)(me)&&""!==me){var e=me.label.split("-"),t=(0,i.Z)(e,3),s=t[0],n=t[1],r=t[2];Me({classs:n,semester:s,section:r})}}),[me]),(0,c.useEffect)((function(){Ee&&function(){Oe.apply(this,arguments)}()}),[]);var Pe=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Z)("institute/","",null);case 2:if(t=e.sent,console.warn("Reponse Institutes: ",t),!t.data||200!==t.status){e.next=12;break}return e.next=7,t.data.map((function(e){return{value:e.id,label:e.name}}));case 7:s=e.sent,console.warn("Updated Institutes: ",s),D(s),e.next=13;break;case 12:console.log("institute error");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Z)("institute/field/","",null);case 2:if(!(t=e.sent).data||200!==t.status){e.next=10;break}return e.next=6,t.data.map((function(e){return{value:e.id,label:e.name}}));case 6:s=e.sent,L(s),e.next=11;break;case 10:console.log("field error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ge=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var s,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,h.Z)("institute/institite-department/?institute=".concat(t.value),"GET",null);case 4:if(!(s=e.sent).data||200!==s.status){e.next=14;break}return console.log("response of department",s),e.next=9,s.data.map((function(e){return{value:e.department.id,label:e.department.name}}));case 9:n=e.sent,console.log("updatedData of department",n),O(n),e.next=15;break;case 14:console.log("department error");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Z)("institute/classs/","",null);case 2:if(!(t=e.sent).data||200!==t.status){e.next=10;break}return e.next=6,t.data.map((function(e){return{value:e.id,label:e.name+" - "+e.semester+" - "+e.section}}));case 6:s=e.sent,U(s),e.next=11;break;case 10:console.log("class error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),He=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Z)("institute/subject/","",null);case 2:if(!(t=e.sent).data||200!==t.status){e.next=10;break}return e.next=6,t.data.map((function(e){return{value:e.id,label:e.name}}));case 6:s=e.sent,$(s),e.next=11;break;case 10:console.log("subject error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){Pe(),Xe(),Ue(),He()}),[]),(0,c.useEffect)((function(){le&&(console.log("selectedInstitute",le),Ge(le))}),[le]);var Ke=function(e,t){var s=t||"";switch(e){case"success":k.fn.success("\u0646\u0645\u0631\u06cc \u067e\u0647 \u0628\u0631\u06cc\u0627\u0644\u06cc\u062a\u0648\u0628 \u0633\u0631\u0647 \u062b\u0628\u062a \u0634\u0648\u06cc","\u0645\u0648\u0641\u0642\u06cc\u062a",3e3,null,null,s);break;case"error":k.fn.error("\u0646\u0645\u0631\u06cc \u062b\u0628\u062a \u0646\u0647 \u0634\u0648\u06cc \u0628\u06cc\u0627 \u06a9\u0648\u0634\u0634 \u0648\u06a9\u0631\u06cc","\u062e\u0637\u0627",9e3,(function(){alert("callback")}),null,s);break;default:k.fn.info("Info message")}},Qe=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Z)("students/class-marks/list/?institute=".concat(le.value,"&classs=").concat(me.value,"&shift=").concat(ke.value,"&department=").concat(ue.value,"&educational_year=").concat(we.value,"&subject=").concat(Ze.value),"",null);case 2:(s=e.sent).data&&200===s.status?(console.log("response of students",s),ne(s.data),f(!0)):console.log("subject error");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var s,n,l,i,c,o,u,d,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],Object.keys(Re).forEach((function(e){s.push((0,r.Z)({student_id:e},Re[e]))})),console.log("arr is: ",Re),n=we.value,l=le.value,i=ue.value,c=me.value,o=Ze.value,u=ke.value,console.log("educationalYear",n),console.log("instituteId",l),console.log("departmentId",i),console.log("classId",c),console.log("subjectId",o),console.log("newStudents",s),d=[{educational_year:n,institute:l,department:i,classs:c,subject:o,shift:u}].concat(s),console.log("data",d),e.next=19,(0,h.Z)("students/class-marks/create/","POST",d);case 19:(x=e.sent).status>=200||x.status<300>201?(T(!0),Ke("success","filled")):(console.log("marks error"),T(!1),Ke("error","filled"));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(j.Z,{children:[(0,w.jsx)("div",{className:"mt-4 ml-5",children:(0,w.jsx)("h2",{className:"mt-5 m-5 titleStyle",children:(0,w.jsx)(y.Z,{id:"marks.title"})})}),(0,w.jsx)(p.Z,{children:u?(0,w.jsx)(w.Fragment,{children:A?(0,w.jsx)("div",{className:"wizard-basic-step text-center pt-3",children:(0,w.jsxs)("div",{children:[(0,w.jsx)("h1",{className:"mb-2",children:(0,w.jsx)(y.Z,{id:"wizard.content-thanks"})}),(0,w.jsx)("h3",{children:(0,w.jsx)(y.Z,{id:"wizard.registered"})}),(0,w.jsx)(g.Z,{className:"m-5 bg-primary",onClick:function(){f(!1),T(!1)},children:(0,w.jsx)(y.Z,{id:"button.Back"})})]})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(Z.Z,{className:"border border bg-primary me-5 p-1 ",style:{marginInline:"16%"},children:[(0,w.jsxs)(S.F,{xxs:"2",children:[(0,w.jsx)(v.Z,{style:{fontSize:"20px",fontWeight:"bold"},children:(0,w.jsx)(y.Z,{id:"forms.FieldLabel"})}),(0,w.jsx)("h5",{children:ue.label})]}),(0,w.jsxs)(S.F,{xxs:"2",children:[(0,w.jsx)(v.Z,{style:{fontSize:"20px",fontWeight:"bold"},children:(0,w.jsx)(y.Z,{id:"marks.ClassLabel"})}),(0,w.jsx)("h5",{children:Je.classs})]}),(0,w.jsxs)(S.F,{xxs:"2",children:[(0,w.jsx)(v.Z,{style:{fontSize:"20px",fontWeight:"bold"},children:(0,w.jsx)(y.Z,{id:"forms.StudyTimeLabel"})}),(0,w.jsx)("h5",{children:ke.label})]}),(0,w.jsxs)(S.F,{xxs:"2",children:[(0,w.jsx)(v.Z,{style:{fontSize:"20px",fontWeight:"bold"},children:(0,w.jsx)(y.Z,{id:"marks.SemesterLabel"})}),(0,w.jsx)("h5",{children:Je.semester})]}),(0,w.jsxs)(S.F,{xxs:"2",children:[(0,w.jsx)(v.Z,{style:{fontSize:"20px",fontWeight:"bold"},children:(0,w.jsx)(y.Z,{id:"marks.SectionLabel"})}),(0,w.jsx)("h5",{children:Je.section})]}),(0,w.jsxs)(S.F,{xxs:"2",children:[(0,w.jsx)(v.Z,{style:{fontSize:"20px",fontWeight:"bold"},children:(0,w.jsx)(y.Z,{id:"marks.SubjectLabel"})}),(0,w.jsx)("h5",{children:Ze.label})]})]}),(0,w.jsx)(o.J9,{initialValues:C,onSubmit:$e,children:function(e){var t=e.errors,s=e.touched;return(0,w.jsxs)(o.l0,{className:"av-tooltip tooltip-label-right ",children:[(0,w.jsx)(Z.Z,{className:"justify-content-center  border border",style:{marginInline:"16%",height:"30rem",overflowY:"scroll",overflowX:"hidden"},children:(0,w.jsxs)("table",{className:"table ",children:[(0,w.jsx)("thead",{className:"thead-dark",children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,w.jsx)(y.Z,{id:"marks.No"})}),(0,w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,w.jsx)(y.Z,{id:"marks.FullName"})}),(0,w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,w.jsx)(y.Z,{id:"marks.FatherName"})}),(0,w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,w.jsx)(y.Z,{id:"marks.ID"})}),(0,w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,w.jsx)(y.Z,{id:"marks.Marks"})})]})}),(0,w.jsx)("tbody",{className:"border border ",style:{overflowY:"scroll",overflowX:"hidden"},children:se.length>0&&se.map((function(e,a){return(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{scope:"row",style:{fontSize:"20px",textAlign:"center"},children:a+1}),(0,w.jsx)("td",{style:{fontSize:"20px",textAlign:"center"},children:e.name}),(0,w.jsx)("td",{style:{fontSize:"20px",textAlign:"center"},children:e.father_name}),(0,w.jsx)("td",{style:{fontSize:"20px",textAlign:"center"},children:e.student_id}),(0,w.jsx)("td",{children:(0,w.jsxs)("div",{style:{margin:"-7px",fontSize:"15px"},children:[(0,w.jsx)("input",{type:"number",className:"form-control",name:"marks",min:0,max:100,onChange:function(t){var s=Re;s[e.student_id]=(0,r.Z)((0,r.Z)({},s[e.student_id]),{},(0,n.Z)({},t.target.name,Number.parseInt(t.target.value))),We(s)}}),t.score&&s.score?(0,w.jsx)("div",{className:"invalid-feedback d-block",children:t.score}):null]})})]},a)}))}),(0,w.jsx)("tfoot",{className:"thead-dark",children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,w.jsx)(y.Z,{id:"marks.No"})}),(0,w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,w.jsx)(y.Z,{id:"marks.FullName"})}),(0,w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,w.jsx)(y.Z,{id:"marks.FatherName"})}),(0,w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,w.jsx)(y.Z,{id:"marks.ID"})}),(0,w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,w.jsx)(y.Z,{id:"marks.Marks"})})]})})]})}),(0,w.jsx)(Z.Z,{className:" justify-content-center",children:(0,w.jsxs)(S.F,{xxs:"9",className:"m-5",children:[(0,w.jsx)(g.Z,{className:" m-4 ",color:"primary",onClick:function(){return f(!1)},children:(0,w.jsx)(y.Z,{id:"button.Back"})}),(0,w.jsx)("div",{className:"d-flex justify-content-between align-items-center m-4 float-right",children:(0,w.jsx)(g.Z,{size:"lg",type:"submit",color:"primary",children:(0,w.jsx)(y.Z,{id:"button.SubmitButton"})})})]})})]})}})]})}):(0,w.jsx)(o.J9,{initialValues:C,onSubmit:Qe,validationSchema:z,children:function(e){var t=e.errors,s=e.touched,n=e.values,r=e.setFieldTouched,a=e.setFieldValue,l=e.handleSubmit;return(0,w.jsxs)(o.l0,{className:"av-tooltip tooltip-label-right  style",children:[(0,w.jsxs)(Z.Z,{className:"m-5",children:[(0,w.jsxs)(S.F,{xxs:"6",children:[(0,w.jsxs)(b.Z,{className:"form-group has-float-label error-l-150 ",children:[(0,w.jsx)(v.Z,{children:(0,w.jsx)(y.Z,{id:"forms.InstituteLabel"})}),(0,w.jsx)(N.ju,{name:"institute",id:"institute",options:W,onChange:a,onBlur:r,onClick:ie(n.institute)}),t.institute&&s.institute?(0,w.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:t.institute}):null]}),(0,w.jsxs)(b.Z,{className:"form-group has-float-label mt-5  error-l-150",children:[(0,w.jsx)(v.Z,{children:(0,w.jsx)(y.Z,{id:"forms.StudyTimeLabel"})}),(0,w.jsx)(N.ju,{name:"studyTime",id:"studyTime",value:n.studyTime,options:m.Zp,onChange:a,onBlur:r,onClick:ye(n.studyTime)}),t.studyTime&&s.studyTime?(0,w.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:t.studyTime}):null]}),(0,w.jsxs)(b.Z,{className:"form-group has-float-label mt-5  error-l-150",children:[(0,w.jsx)(v.Z,{children:(0,w.jsx)(y.Z,{id:"forms.educationYearLabel"})}),(0,w.jsx)(N.ju,{name:"educationalYear",id:"educationalYear",options:m.Ar,onChange:a,onBlur:r,onClick:ze(n.educationalYear)}),t.educationalYear&&s.educationalYear?(0,w.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:t.educationalYear}):null]})]}),(0,w.jsxs)(S.F,{xxs:"6",children:[(0,w.jsxs)(b.Z,{className:"form-group has-float-label error-l-150 ",children:[(0,w.jsx)(v.Z,{children:(0,w.jsx)(y.Z,{id:"marks.ClassLabel"})}),(0,w.jsx)(N.ju,{name:"classs",id:"classs",value:n.classs,options:G,onChange:a,onBlur:r,onClick:fe(n.classs),required:!0}),t.classs&&s.classs?(0,w.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:t.classs}):null]}),(0,w.jsxs)(b.Z,{className:"form-group has-float-label mt-5 error-l-150",children:[(0,w.jsx)(v.Z,{children:(0,w.jsx)(y.Z,{id:"forms.studyDepartment"})}),(0,w.jsx)(N.ju,{name:"department",id:"department",value:n.department,options:M,onChange:a,onBlur:r,onClick:de(n.department),required:!0}),t.department&&s.department?(0,w.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:t.department}):null]}),(0,w.jsxs)(b.Z,{className:"form-group has-float-label mt-5 error-l-150",children:[(0,w.jsx)(v.Z,{children:(0,w.jsx)(y.Z,{id:"marks.SubjectLabel"})}),(0,w.jsx)(N.ju,{name:"subject",id:"subject",value:n.subject,options:Q,onChange:a,onBlur:r,onClick:be(n.subject),required:!0}),t.subject&&s.subject?(0,w.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:t.subject}):null]})]})]}),(0,w.jsx)(Z.Z,{children:(0,w.jsx)(S.F,{children:(0,w.jsx)(g.Z,{onClick:l,color:"primary",className:"float-right  buttonStyle",size:"lg",style:{margin:"2% 0% 10% 6%"},children:(0,w.jsx)("span",{className:"label",children:(0,w.jsx)(y.Z,{id:"button.Next"})})})})})]})}})})]})})}}}]);
//# sourceMappingURL=marks-register.12d1efb7.chunk.js.map