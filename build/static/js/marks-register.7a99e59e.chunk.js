(this["webpackJsonpgogo-react"]=this["webpackJsonpgogo-react"]||[]).push([[82,75],{1858:function(e,t,s){"use strict";s.r(t);var a=s(159),n=s(4),c=s.n(n),r=s(14),l=s(148),i=s(6),o=s(199),u=s(35),j=s.n(u),d=s(497),b=s(228),x=(s(503),s(198)),m=(s(443),s(221)),O=s(614),h=s(1315),p=s(615),f=s(1276),v=s(1277),g=s(595),k=s(41),y=s(150),S=s(156),N=s(201),w=(s(515),s(677),s(12)),z=m.e().shape({institute:m.e().shape({value:m.f().required()}).nullable().required(Object(w.jsx)(y.a,{id:"forms.InstituteErr"})),educationalYear:m.e().shape({value:m.f().required()}).nullable().required(Object(w.jsx)(y.a,{id:"forms.educationYearErr"})),studyTime:m.e().shape({value:m.f().required()}).nullable().required(Object(w.jsx)(y.a,{id:"forms.StudyTimeErr"})),classs:m.e().shape({value:m.f().required()}).nullable().required(Object(w.jsx)(y.a,{id:"marks.ClassErr"})),department:m.e().shape({value:m.f().required()}).nullable().required(Object(w.jsx)(y.a,{id:"teacher.departmentIdErr"})),subject:m.e().shape({value:m.f().required()}).nullable().required(Object(w.jsx)(y.a,{id:"marks.SubjectErr"}))}),I={institute:[],educationalYear:[],studyTime:[],classs:[],department:[],subject:[]};t.default=function(e){e.match;var t=Object(i.useState)(!1),s=Object(l.a)(t,2),n=s[0],u=s[1],m=Object(i.useState)(0),C=Object(l.a)(m,2),q=(C[0],C[1],Object(i.useState)(!1)),A=Object(l.a)(q,2),T=A[0],Y=A[1],E=Object(i.useState)([]),L=Object(l.a)(E,2),_=(L[0],L[1]),F=Object(i.useState)([]),B=Object(l.a)(F,2),U=B[0],P=B[1],W=Object(i.useState)([]),D=Object(l.a)(W,2),J=D[0],M=D[1],V=Object(i.useState)([]),X=Object(l.a)(V,2),G=X[0],H=X[1],R=Object(i.useState)([]),K=Object(l.a)(R,2),Q=K[0],Z=K[1],$=Object(i.useState)([]),ee=Object(l.a)($,2),te=ee[0],se=ee[1],ae=Object(i.useState)(),ne=Object(l.a)(ae,2),ce=ne[0],re=ne[1],le=Object(i.useState)(""),ie=Object(l.a)(le,2),oe=ie[0],ue=ie[1],je=Object(i.useState)(""),de=Object(l.a)(je,2),be=de[0],xe=de[1],me=Object(i.useState)(""),Oe=Object(l.a)(me,2),he=Oe[0],pe=Oe[1],fe=Object(i.useState)(""),ve=Object(l.a)(fe,2),ge=ve[0],ke=ve[1],ye=Object(i.useState)(""),Se=Object(l.a)(ye,2),Ne=Se[0],we=Se[1],ze=Object(i.useState)(55),Ie=Object(l.a)(ze,2),Ce=(Ie[0],Ie[1],Object(i.useState)()),qe=Object(l.a)(Ce,2),Ae=(qe[0],qe[1],Object(i.useState)()),Te=Object(l.a)(Ae,2),Ye=(Te[0],Te[1],Object(i.useState)()),Ee=Object(l.a)(Ye,2),Le=(Ee[0],Ee[1],Object(d.h)().markId),_e=Object(i.useState)({classs:"",semester:"",section:""}),Fe=Object(l.a)(_e,2),Be=Fe[0],Ue=Fe[1];Object(i.useEffect)((function(){if(!Object(o.d)(be)&&""!==be){var e=be.label.split("-"),t=Object(l.a)(e,3),s=t[0],a=t[1],n=t[2];Ue({classs:a,semester:s,section:n})}}),[be]),Le&&Object(i.useEffect)((function(){function e(){return(e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat(studentMarkId,"/?student_id=").concat(Le));case 2:t=e.sent,t.data;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var Pe=function(){var e=Object(r.a)(c.a.mark((function e(){var t,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)("institute/","",null);case 2:if(t=e.sent,console.warn("Reponse Institutes: ",t),!t.data||200!==t.status){e.next=12;break}return e.next=7,t.data.map((function(e){return{value:e.id,label:e.name}}));case 7:s=e.sent,console.warn("Updated Institutes: ",s),P(s),e.next=13;break;case 12:console.log("institute error");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),We=function(){var e=Object(r.a)(c.a.mark((function e(){var t,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)("institute/field/","",null);case 2:if(!(t=e.sent).data||200!==t.status){e.next=10;break}return e.next=6,t.data.map((function(e){return{value:e.id,label:e.name}}));case 6:s=e.sent,_(s),e.next=11;break;case 10:console.log("field error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=Object(r.a)(c.a.mark((function e(t){var s,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(b.a)("institute/institite-department/?institute=".concat(t.value),"GET",null);case 4:if(!(s=e.sent).data||200!==s.status){e.next=14;break}return console.log("response of department",s),e.next=9,s.data.map((function(e){return{value:e.department.id,label:e.department.name}}));case 9:a=e.sent,console.log("updatedData of department",a),M(a),e.next=15;break;case 14:console.log("department error");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=Object(r.a)(c.a.mark((function e(){var t,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)("institute/classs/","",null);case 2:if(!(t=e.sent).data||200!==t.status){e.next=10;break}return e.next=6,t.data.map((function(e){return{value:e.id,label:e.name+" - "+e.semester+" - "+e.section}}));case 6:s=e.sent,H(s),e.next=11;break;case 10:console.log("class error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(r.a)(c.a.mark((function e(){var t,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)("institute/subject/","",null);case 2:if(!(t=e.sent).data||200!==t.status){e.next=10;break}return e.next=6,t.data.map((function(e){return{value:e.id,label:e.name}}));case 6:s=e.sent,Z(s),e.next=11;break;case 10:console.log("subject error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){Pe(),We(),Je(),Me()}),[]),Object(i.useEffect)((function(){ce&&(console.log("selectedInstitute",ce),De(ce))}),[ce]);var Ve=function(e,t){var s=t||"";switch(e){case"success":k.b.success("\u0646\u0645\u0631\u06cc \u067e\u0647 \u0628\u0631\u06cc\u0627\u0644\u06cc\u062a\u0648\u0628 \u0633\u0631\u0647 \u062b\u0628\u062a \u0634\u0648\u06cc","\u0645\u0648\u0641\u0642\u06cc\u062a",3e3,null,null,s);break;case"error":k.b.error("\u0646\u0645\u0631\u06cc \u062b\u0628\u062a \u0646\u0647 \u0634\u0648\u06cc \u0628\u06cc\u0627 \u06a9\u0648\u0634\u0634 \u0648\u06a9\u0631\u06cc","\u062e\u0637\u0627",9e3,(function(){alert("callback")}),null,s);break;default:k.b.info("Info message")}},Xe=function(){var e=Object(r.a)(c.a.mark((function e(t){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)("students/class-marks/list/?institute=".concat(ce.value,"&classs=").concat(be.value,"&shift=").concat(ge.value,"&department=").concat(oe.value,"&educational_year=").concat(Ne.value,"&subject=").concat(he.value),"",null);case 2:(s=e.sent).data&&200===s.status?(console.log("response of students",s),se(s.data),u(!0)):console.log("subject error");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(r.a)(c.a.mark((function e(t){var s,n,r,l,i,o,u,j,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Ne.value,n=ce.value,r=oe.value,l=be.value,i=he.value,o=ge.value,console.log("educationalYear",s),console.log("instituteId",n),console.log("departmentId",r),console.log("classId",l),console.log("subjectId",i),u=te.map((function(e,s){return{student_id:e.student_id,marks:t.score[e.student_id]}})),console.log("newStudents",u),j=[{educational_year:s,institute:n,department:r,classs:l,subject:i,shift:o}].concat(Object(a.a)(u)),console.log("data",j),e.next=17,Object(b.a)("students/class-marks/create/","POST",j);case 17:200===(d=e.sent).status||201===d.status||202===d.status?(Y(!0),Ve("success","filled")):(console.log("marks error"),Y(!1),Ve("error","filled"));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(O.a,{children:[Object(w.jsx)("div",{className:"mt-4 ml-5",children:Object(w.jsx)("h2",{className:"mt-5 m-5 titleStyle",children:Object(w.jsx)(y.a,{id:"marks.title"})})}),Object(w.jsx)(h.a,{children:n?Object(w.jsx)(w.Fragment,{children:T?Object(w.jsx)("div",{className:"wizard-basic-step text-center pt-3",children:Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{className:"mb-2",children:Object(w.jsx)(y.a,{id:"wizard.content-thanks"})}),Object(w.jsx)("h3",{children:Object(w.jsx)(y.a,{id:"wizard.registered"})}),Object(w.jsx)(g.a,{className:"m-5 bg-primary",onClick:function(){u(!1),Y(!1)},children:Object(w.jsx)(y.a,{id:"button.Back"})})]})}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(p.a,{className:"border border bg-primary me-5 p-1 ",style:{marginInline:"16%"},children:[Object(w.jsxs)(S.a,{xxs:"2",children:[Object(w.jsx)(v.a,{style:{fontSize:"20px",fontWeight:"bold"},children:Object(w.jsx)(y.a,{id:"forms.FieldLabel"})}),Object(w.jsx)("h5",{children:oe.label})]}),Object(w.jsxs)(S.a,{xxs:"2",children:[Object(w.jsx)(v.a,{style:{fontSize:"20px",fontWeight:"bold"},children:Object(w.jsx)(y.a,{id:"marks.ClassLabel"})}),Object(w.jsx)("h5",{children:Be.classs})]}),Object(w.jsxs)(S.a,{xxs:"2",children:[Object(w.jsx)(v.a,{style:{fontSize:"20px",fontWeight:"bold"},children:Object(w.jsx)(y.a,{id:"forms.StudyTimeLabel"})}),Object(w.jsx)("h5",{children:ge.label})]}),Object(w.jsxs)(S.a,{xxs:"2",children:[Object(w.jsx)(v.a,{style:{fontSize:"20px",fontWeight:"bold"},children:Object(w.jsx)(y.a,{id:"marks.SemesterLabel"})}),Object(w.jsx)("h5",{children:Be.semester})]}),Object(w.jsxs)(S.a,{xxs:"2",children:[Object(w.jsx)(v.a,{style:{fontSize:"20px",fontWeight:"bold"},children:Object(w.jsx)(y.a,{id:"marks.SectionLabel"})}),Object(w.jsx)("h5",{children:Be.section})]}),Object(w.jsxs)(S.a,{xxs:"2",children:[Object(w.jsx)(v.a,{style:{fontSize:"20px",fontWeight:"bold"},children:Object(w.jsx)(y.a,{id:"marks.SubjectLabel"})}),Object(w.jsx)("h5",{children:he.label})]})]}),Object(w.jsx)(o.c,{initialValues:I,onSubmit:Ge,children:function(e){var t=e.errors;return Object(w.jsxs)(o.b,{className:"av-tooltip tooltip-label-right ",children:[Object(w.jsx)(p.a,{className:"justify-content-center  border border",style:{marginInline:"16%",height:"30rem",overflowY:"scroll",overflowX:"hidden"},children:Object(w.jsxs)("table",{className:"table ",children:[Object(w.jsx)("thead",{className:"thead-dark",children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:Object(w.jsx)(y.a,{id:"marks.No"})}),Object(w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:Object(w.jsx)(y.a,{id:"marks.FullName"})}),Object(w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:Object(w.jsx)(y.a,{id:"marks.FatherName"})}),Object(w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:Object(w.jsx)(y.a,{id:"marks.ID"})}),Object(w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:Object(w.jsx)(y.a,{id:"marks.Marks"})})]})}),Object(w.jsx)("tbody",{className:"border border ",style:{overflowY:"scroll",overflowX:"hidden"},children:te.length>0&&te.map((function(e,s){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{scope:"row",style:{fontSize:"20px",textAlign:"center"},children:s+1}),Object(w.jsx)("td",{style:{fontSize:"20px",textAlign:"center"},children:e.name}),Object(w.jsx)("td",{style:{fontSize:"20px",textAlign:"center"},children:e.father_name}),Object(w.jsx)("td",{style:{fontSize:"20px",textAlign:"center"},children:e.student_id}),Object(w.jsx)("td",{children:Object(w.jsxs)("div",{style:{margin:"-7px",fontSize:"15px"},children:[Object(w.jsx)(o.a,{type:"number",style:{fontSize:"15px",textAlign:"center"},className:"form-control",name:"score[".concat(e.student_id,"]"),min:"0",max:"100"}),t.score&&touched.score?Object(w.jsx)("div",{className:"invalid-feedback d-block",children:t.score}):null]})})]},s)}))}),Object(w.jsx)("tfoot",{className:"thead-dark",children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:Object(w.jsx)(y.a,{id:"marks.No"})}),Object(w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:Object(w.jsx)(y.a,{id:"marks.FullName"})}),Object(w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:Object(w.jsx)(y.a,{id:"marks.FatherName"})}),Object(w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:Object(w.jsx)(y.a,{id:"marks.ID"})}),Object(w.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:Object(w.jsx)(y.a,{id:"marks.Marks"})})]})})]})}),Object(w.jsx)(p.a,{className:" justify-content-center",children:Object(w.jsxs)(S.a,{xxs:"9",className:"m-5",children:[Object(w.jsx)(g.a,{className:" m-4 ",color:"primary",onClick:function(){return u(!1)},children:Object(w.jsx)(y.a,{id:"button.Back"})}),Object(w.jsx)("div",{className:"d-flex justify-content-between align-items-center m-4 float-right",children:Object(w.jsx)(g.a,{size:"lg",type:"submit",color:"primary",children:Object(w.jsx)(y.a,{id:"button.SubmitButton"})})})]})})]})}})]})}):Object(w.jsx)(o.c,{initialValues:I,onSubmit:Xe,validationSchema:z,children:function(e){var t=e.errors,s=e.touched,a=e.values,n=e.setFieldTouched,c=e.setFieldValue,r=e.handleSubmit;return Object(w.jsxs)(o.b,{className:"av-tooltip tooltip-label-right  style",children:[Object(w.jsxs)(p.a,{className:"m-5",children:[Object(w.jsxs)(S.a,{xxs:"6",children:[Object(w.jsxs)(f.a,{className:"form-group has-float-label error-l-150 ",children:[Object(w.jsx)(v.a,{children:Object(w.jsx)(y.a,{id:"forms.InstituteLabel"})}),Object(w.jsx)(N.c,{name:"institute",id:"institute",options:U,onChange:c,onBlur:n,onClick:re(a.institute)}),t.institute&&s.institute?Object(w.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:t.institute}):null]}),Object(w.jsxs)(f.a,{className:"form-group has-float-label mt-5  error-l-150",children:[Object(w.jsx)(v.a,{children:Object(w.jsx)(y.a,{id:"forms.StudyTimeLabel"})}),Object(w.jsx)(N.c,{name:"studyTime",id:"studyTime",value:a.studyTime,options:x.H,onChange:c,onBlur:n,onClick:ke(a.studyTime)}),t.studyTime&&s.studyTime?Object(w.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:t.studyTime}):null]}),Object(w.jsxs)(f.a,{className:"form-group has-float-label mt-5  error-l-150",children:[Object(w.jsx)(v.a,{children:Object(w.jsx)(y.a,{id:"forms.educationYearLabel"})}),Object(w.jsx)(N.c,{name:"educationalYear",id:"educationalYear",options:x.m,onChange:c,onBlur:n,onClick:we(a.educationalYear)}),t.educationalYear&&s.educationalYear?Object(w.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:t.educationalYear}):null]})]}),Object(w.jsxs)(S.a,{xxs:"6",children:[Object(w.jsxs)(f.a,{className:"form-group has-float-label error-l-150 ",children:[Object(w.jsx)(v.a,{children:Object(w.jsx)(y.a,{id:"marks.ClassLabel"})}),Object(w.jsx)(N.c,{name:"classs",id:"classs",value:a.classs,options:G,onChange:c,onBlur:n,onClick:xe(a.classs),required:!0}),t.classs&&s.classs?Object(w.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:t.classs}):null]}),Object(w.jsxs)(f.a,{className:"form-group has-float-label mt-5 error-l-150",children:[Object(w.jsx)(v.a,{children:Object(w.jsx)(y.a,{id:"forms.studyDepartment"})}),Object(w.jsx)(N.c,{name:"department",id:"department",value:a.department,options:J,onChange:c,onBlur:n,onClick:ue(a.department),required:!0}),t.department&&s.department?Object(w.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:t.department}):null]}),Object(w.jsxs)(f.a,{className:"form-group has-float-label mt-5 error-l-150",children:[Object(w.jsx)(v.a,{children:Object(w.jsx)(y.a,{id:"marks.SubjectLabel"})}),Object(w.jsx)(N.c,{name:"subject",id:"subject",value:a.subject,options:Q,onChange:c,onBlur:n,onClick:pe(a.subject),required:!0}),t.subject&&s.subject?Object(w.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:t.subject}):null]})]})]}),Object(w.jsx)(p.a,{children:Object(w.jsx)(S.a,{children:Object(w.jsx)(g.a,{onClick:r,color:"primary",className:"float-right  buttonStyle",size:"lg",style:{margin:"2% 0% 10% 6%"},children:Object(w.jsx)("span",{className:"label",children:Object(w.jsx)(y.a,{id:"button.Next"})})})})})]})}})})]})})}},503:function(e,t,s){"use strict";t.a=function(){var e=JSON.parse(localStorage.getItem("user"));return console.log("user is here",e.user_id),e.user_id}},677:function(e,t,s){"use strict";s.r(t);var a=s(11),n=s(472),c=s(6),r=s.n(c),l=s(497),i=s(12),o=r.a.lazy((function(){return Promise.all([s.e(6),s.e(161)]).then(s.bind(null,834))})),u=r.a.lazy((function(){return Promise.all([s.e(6),s.e(162)]).then(s.bind(null,835))})),j=r.a.lazy((function(){return Promise.all([s.e(1),s.e(0),s.e(2),s.e(3),s.e(150)]).then(s.bind(null,836))})),d=r.a.lazy((function(){return s.e(183).then(s.bind(null,813))})),b=r.a.lazy((function(){return Promise.all([s.e(1),s.e(0),s.e(2),s.e(3),s.e(148)]).then(s.bind(null,814))})),x=r.a.lazy((function(){return Promise.all([s.e(1),s.e(0),s.e(2),s.e(3),s.e(149)]).then(s.bind(null,815))}));t.default=function(e){var t=e.match,s=e.props;return Object(i.jsx)(c.Suspense,{fallback:Object(i.jsx)("div",{className:"loading"}),children:Object(i.jsxs)(l.d,{children:[Object(i.jsx)(l.a,{exact:!0,from:"".concat(t.url,"/"),to:"".concat(t.url,"/institutes")}),Object(i.jsx)(n.a,{path:"".concat(t.url,"/institutes"),component:o,roles:[a.s.superUser,a.s.admin,a.s.provincial,a.s.institute],props:s}),Object(i.jsx)(n.a,{path:"".concat(t.url,"/promotion-demotion-list"),component:u,roles:[a.s.superUser,a.s.admin,a.s.provincial,a.s.institute],props:s}),Object(i.jsx)(n.a,{exact:!0,path:"".concat(t.url,"/register"),component:j,roles:[a.s.superUser,a.s.admin,a.s.provincial,a.s.institute],props:s}),Object(i.jsx)(n.a,{path:"".concat(t.url,"/register/:instituteId"),component:j,roles:[a.s.superUser,a.s.admin,a.s.provincial,a.s.institute],props:s}),Object(i.jsx)(n.a,{path:"".concat(t.url,"/institute-create"),component:d,roles:[a.s.superUser,a.s.admin,a.s.provincial,a.s.institute],props:s}),Object(i.jsx)(n.a,{path:"".concat(t.url,"/institute-upgrade"),component:b,roles:[a.s.superUser,a.s.admin,a.s.provincial,a.s.institute],props:s}),Object(i.jsx)(n.a,{path:"".concat(t.url,"/institute/:instituteId"),component:x,roles:[a.s.superUser,a.s.admin,a.s.provincial,a.s.institute],props:s}),Object(i.jsx)(l.a,{to:"/error"})]})})}}}]);
//# sourceMappingURL=marks-register.7a99e59e.chunk.js.map