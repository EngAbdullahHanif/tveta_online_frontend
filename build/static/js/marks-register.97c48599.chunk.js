"use strict";(self.webpackChunktveta_online=self.webpackChunktveta_online||[]).push([[4092],{83737:function(e,t,s){s.r(t);var n=s(4942),r=s(1413),a=s(74165),l=s(15861),i=s(29439),c=s(50390),o=s(16295),u=s(45133),d=s.n(u),x=s(14037),h=s(32121),m=s(830),j=(s(48907),s(49360)),f=s(31833),p=s(14237),Z=s(14778),b=s(64884),v=s(94048),g=s(16778),k=s(22834),y=s(37671),S=s(16905),N=s(39873),w=s(83882),z=s(62559),C=j.Ry().shape({institute:j.Ry().shape({value:j.Z_().required()}).nullable().required((0,z.jsx)(y.Z,{id:"forms.InstituteErr"})),educationalYear:j.Ry().shape({value:j.Z_().required()}).nullable().required((0,z.jsx)(y.Z,{id:"forms.educationYearErr"})),studyTime:j.Ry().shape({value:j.Z_().required()}).nullable().required((0,z.jsx)(y.Z,{id:"forms.StudyTimeErr"})),classs:j.Ry().shape({value:j.Z_().required()}).nullable().required((0,z.jsx)(y.Z,{id:"marks.ClassErr"})),department:j.Ry().shape({value:j.Z_().required()}).nullable().required((0,z.jsx)(y.Z,{id:"teacher.departmentIdErr"})),subject:j.Ry().shape({value:j.Z_().required()}).nullable().required((0,z.jsx)(y.Z,{id:"marks.SubjectErr"}))}),F={institute:[],educationalYear:[],studyTime:[],classs:[],department:[],subject:[],marks:0};t.default=function(e){e.match;var t=(0,c.useContext)(w.V).institutes,s=(0,c.useState)(!1),u=(0,i.Z)(s,2),j=u[0],_=u[1],q=(0,c.useState)(0),A=(0,i.Z)(q,2),I=(A[0],A[1],(0,c.useState)(!1)),T=(0,i.Z)(I,2),Y=T[0],E=T[1],L=(0,c.useState)([]),B=(0,i.Z)(L,2),R=(B[0],B[1]),W=(0,c.useState)([]),D=(0,i.Z)(W,2),V=D[0],J=D[1],M=(0,c.useState)([]),O=(0,i.Z)(M,2),P=O[0],X=O[1],G=(0,c.useState)([]),H=(0,i.Z)(G,2),K=H[0],Q=H[1],U=(0,c.useState)([]),$=(0,i.Z)(U,2),ee=$[0],te=$[1],se=(0,c.useState)(),ne=(0,i.Z)(se,2),re=ne[0],ae=ne[1],le=(0,c.useState)(""),ie=(0,i.Z)(le,2),ce=ie[0],oe=ie[1],ue=(0,c.useState)(""),de=(0,i.Z)(ue,2),xe=de[0],he=de[1],me=(0,c.useState)(""),je=(0,i.Z)(me,2),fe=je[0],pe=je[1],Ze=(0,c.useState)(""),be=(0,i.Z)(Ze,2),ve=be[0],ge=be[1],ke=(0,c.useState)(""),ye=(0,i.Z)(ke,2),Se=ye[0],Ne=ye[1],we=(0,c.useState)(55),ze=(0,i.Z)(we,2),Ce=(ze[0],ze[1],(0,c.useState)()),Fe=(0,i.Z)(Ce,2),_e=(Fe[0],Fe[1],(0,c.useState)()),qe=(0,i.Z)(_e,2),Ae=(qe[0],qe[1],(0,c.useState)()),Ie=(0,i.Z)(Ae,2),Te=(Ie[0],Ie[1],(0,x.useParams)().markId),Ye=(0,c.useState)({}),Ee=(0,i.Z)(Ye,2),Le=Ee[0],Be=Ee[1],Re=(0,c.useState)({classs:"",semester:"",section:""}),We=(0,i.Z)(Re,2),De=We[0],Ve=We[1];function Je(){return(Je=(0,l.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d().get("".concat(1,"/?student_id=",Te));case 2:t=e.sent,t.data;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,c.useEffect)((function(){if(!(0,o.yD)(xe)&&""!==xe){var e=xe.label.split("-"),t=(0,i.Z)(e,3),s=t[0],n=t[1],r=t[2];Ve({classs:n,semester:s,section:r})}}),[xe]),(0,c.useEffect)((function(){Te&&function(){Je.apply(this,arguments)}()}),[]);var Me=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Z)("institute/field/","",null);case 2:if(!(t=e.sent).data||200!==t.status){e.next=10;break}return e.next=6,t.data.map((function(e){return{value:e.id,label:e.name}}));case 6:s=e.sent,R(s),e.next=11;break;case 10:console.log("field error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var s,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.value){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,h.Z)("institute/institite-department/?institute=".concat(t.value),"GET",null);case 4:if(!(s=e.sent).data||200!==s.status){e.next=14;break}return console.log("response of department",s),e.next=9,s.data.map((function(e){return{value:e.department,label:e.department}}));case 9:n=e.sent,console.log("updatedData of department",n),J(n),e.next=15;break;case 14:console.log("department error");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Z)("institute/classs/","",null);case 2:if(!(t=e.sent).data||200!==t.status){e.next=10;break}return e.next=6,t.data.map((function(e){return{value:e.id,label:e.name+" - "+e.semester+" - "+e.section}}));case 6:s=e.sent,X(s),e.next=11;break;case 10:console.log("class error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Z)("institute/subject/","",null);case 2:if(!(t=e.sent).data||200!==t.status){e.next=10;break}return e.next=6,t.data.map((function(e){return{value:e.id,label:e.name}}));case 6:s=e.sent,Q(s),e.next=11;break;case 10:console.log("subject error");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){Me(),Pe(),Xe()}),[]),(0,c.useEffect)((function(){re&&(console.log("selectedInstitute",re),Oe(re))}),[re]);var Ge=function(e,t){var s=t||"";switch(e){case"success":k.fn.success("\u0646\u0645\u0631\u06cc \u067e\u0647 \u0628\u0631\u06cc\u0627\u0644\u06cc\u062a\u0648\u0628 \u0633\u0631\u0647 \u062b\u0628\u062a \u0634\u0648\u06cc","\u0645\u0648\u0641\u0642\u06cc\u062a",3e3,null,null,s);break;case"error":k.fn.error("\u0646\u0645\u0631\u06cc \u062b\u0628\u062a \u0646\u0647 \u0634\u0648\u06cc \u0628\u06cc\u0627 \u06a9\u0648\u0634\u0634 \u0648\u06a9\u0631\u06cc","\u062e\u0637\u0627",9e3,(function(){alert("callback")}),null,s);break;default:k.fn.info("Info message")}},He=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Z)("students/class-marks/list/?institute=".concat(re.value,"&classs=").concat(xe.value,"&shift=").concat(ve.value,"&department=").concat(ce.value,"&educational_year=").concat(Se.value,"&subject=").concat(fe.value),"",null);case 2:(s=e.sent).data&&200===s.status?(console.log("response of students",s),te(s.data),_(!0)):console.log("subject error");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t){var s,n,l,i,c,o,u,d,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],Object.keys(Le).forEach((function(e){s.push((0,r.Z)({student_id:e},Le[e]))})),console.log("arr is: ",Le),n=Se.value,l=re.value,i=ce.value,c=xe.value,o=fe.value,u=ve.value,console.log("educationalYear",n),console.log("instituteId",l),console.log("departmentId",i),console.log("classId",c),console.log("subjectId",o),console.log("newStudents",s),d=[{educational_year:n,institute:l,department:i,classs:c,subject:o,shift:u}].concat(s),console.log("data",d),e.next=19,(0,h.Z)("students/class-marks/create/","POST",d);case 19:(x=e.sent).status>=200||x.status<300>201?(E(!0),Ge("success","filled")):(console.log("marks error"),E(!1),Ge("error","filled"));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)(f.Z,{children:[(0,z.jsx)("div",{className:"mt-4 ml-5",children:(0,z.jsx)("h2",{className:"mt-5 m-5 titleStyle",children:(0,z.jsx)(y.Z,{id:"marks.title"})})}),(0,z.jsx)(p.Z,{children:j?(0,z.jsx)(z.Fragment,{children:Y?(0,z.jsx)("div",{className:"wizard-basic-step text-center pt-3",children:(0,z.jsxs)("div",{children:[(0,z.jsx)("h1",{className:"mb-2",children:(0,z.jsx)(y.Z,{id:"wizard.content-thanks"})}),(0,z.jsx)("h3",{children:(0,z.jsx)(y.Z,{id:"wizard.registered"})}),(0,z.jsx)(g.Z,{className:"m-5 bg-primary",onClick:function(){_(!1),E(!1)},children:(0,z.jsx)(y.Z,{id:"button.Back"})})]})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(Z.Z,{className:"border border bg-primary me-5 p-1 ",style:{marginInline:"16%"},children:[(0,z.jsxs)(S.F,{xxs:"2",children:[(0,z.jsx)(v.Z,{style:{fontSize:"20px",fontWeight:"bold"},children:(0,z.jsx)(y.Z,{id:"forms.FieldLabel"})}),(0,z.jsx)("h5",{children:ce.label})]}),(0,z.jsxs)(S.F,{xxs:"2",children:[(0,z.jsx)(v.Z,{style:{fontSize:"20px",fontWeight:"bold"},children:(0,z.jsx)(y.Z,{id:"marks.ClassLabel"})}),(0,z.jsx)("h5",{children:De.classs})]}),(0,z.jsxs)(S.F,{xxs:"2",children:[(0,z.jsx)(v.Z,{style:{fontSize:"20px",fontWeight:"bold"},children:(0,z.jsx)(y.Z,{id:"forms.StudyTimeLabel"})}),(0,z.jsx)("h5",{children:ve.label})]}),(0,z.jsxs)(S.F,{xxs:"2",children:[(0,z.jsx)(v.Z,{style:{fontSize:"20px",fontWeight:"bold"},children:(0,z.jsx)(y.Z,{id:"marks.SemesterLabel"})}),(0,z.jsx)("h5",{children:De.semester})]}),(0,z.jsxs)(S.F,{xxs:"2",children:[(0,z.jsx)(v.Z,{style:{fontSize:"20px",fontWeight:"bold"},children:(0,z.jsx)(y.Z,{id:"marks.SectionLabel"})}),(0,z.jsx)("h5",{children:De.section})]}),(0,z.jsxs)(S.F,{xxs:"2",children:[(0,z.jsx)(v.Z,{style:{fontSize:"20px",fontWeight:"bold"},children:(0,z.jsx)(y.Z,{id:"marks.SubjectLabel"})}),(0,z.jsx)("h5",{children:fe.label})]})]}),(0,z.jsx)(o.J9,{initialValues:F,onSubmit:Ke,children:function(e){var t=e.errors,s=e.touched;return(0,z.jsxs)(o.l0,{className:"av-tooltip tooltip-label-right ",children:[(0,z.jsx)(Z.Z,{className:"justify-content-center  border border",style:{marginInline:"16%",height:"30rem",overflowY:"scroll",overflowX:"hidden"},children:(0,z.jsxs)("table",{className:"table ",children:[(0,z.jsx)("thead",{className:"thead-dark",children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,z.jsx)(y.Z,{id:"marks.No"})}),(0,z.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,z.jsx)(y.Z,{id:"marks.FullName"})}),(0,z.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,z.jsx)(y.Z,{id:"marks.FatherName"})}),(0,z.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,z.jsx)(y.Z,{id:"marks.ID"})}),(0,z.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,z.jsx)(y.Z,{id:"marks.Marks"})})]})}),(0,z.jsx)("tbody",{className:"border border ",style:{overflowY:"scroll",overflowX:"hidden"},children:ee.length>0&&ee.map((function(e,a){return(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{scope:"row",style:{fontSize:"20px",textAlign:"center"},children:a+1}),(0,z.jsx)("td",{style:{fontSize:"20px",textAlign:"center"},children:e.name}),(0,z.jsx)("td",{style:{fontSize:"20px",textAlign:"center"},children:e.father_name}),(0,z.jsx)("td",{style:{fontSize:"20px",textAlign:"center"},children:e.student_id}),(0,z.jsx)("td",{children:(0,z.jsxs)("div",{style:{margin:"-7px",fontSize:"15px"},children:[(0,z.jsx)("input",{type:"number",className:"form-control",name:"marks",min:0,max:100,onChange:function(t){var s=Le;s[e.student_id]=(0,r.Z)((0,r.Z)({},s[e.student_id]),{},(0,n.Z)({},t.target.name,Number.parseInt(t.target.value))),Be(s)}}),t.score&&s.score?(0,z.jsx)("div",{className:"invalid-feedback d-block",children:t.score}):null]})})]},a)}))}),(0,z.jsx)("tfoot",{className:"thead-dark",children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,z.jsx)(y.Z,{id:"marks.No"})}),(0,z.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,z.jsx)(y.Z,{id:"marks.FullName"})}),(0,z.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,z.jsx)(y.Z,{id:"marks.FatherName"})}),(0,z.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,z.jsx)(y.Z,{id:"marks.ID"})}),(0,z.jsx)("th",{scope:"col",style:{fontSize:"15px",textAlign:"center"},children:(0,z.jsx)(y.Z,{id:"marks.Marks"})})]})})]})}),(0,z.jsx)(Z.Z,{className:" justify-content-center",children:(0,z.jsxs)(S.F,{xxs:"9",className:"m-5",children:[(0,z.jsx)(g.Z,{className:" m-4 ",color:"primary",onClick:function(){return _(!1)},children:(0,z.jsx)(y.Z,{id:"button.Back"})}),(0,z.jsx)("div",{className:"d-flex justify-content-between align-items-center m-4 float-right",children:(0,z.jsx)(g.Z,{size:"lg",type:"submit",color:"primary",children:(0,z.jsx)(y.Z,{id:"button.SubmitButton"})})})]})})]})}})]})}):(0,z.jsx)(o.J9,{initialValues:F,onSubmit:He,validationSchema:C,children:function(e){var s=e.errors,n=e.touched,r=e.values,a=e.setFieldTouched,l=e.setFieldValue,i=e.handleSubmit;return(0,z.jsxs)(o.l0,{className:"av-tooltip tooltip-label-right  style",children:[(0,z.jsxs)(Z.Z,{className:"m-5",children:[(0,z.jsxs)(S.F,{xxs:"6",children:[(0,z.jsxs)(b.Z,{className:"form-group has-float-label error-l-150 ",children:[(0,z.jsx)(v.Z,{children:(0,z.jsx)(y.Z,{id:"forms.InstituteLabel"})}),(0,z.jsx)(N.ju,{name:"institute",id:"institute",options:t,onChange:l,onBlur:a,onClick:ae(r.institute)}),s.institute&&n.institute?(0,z.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:s.institute}):null]}),(0,z.jsxs)(b.Z,{className:"form-group has-float-label mt-5  error-l-150",children:[(0,z.jsx)(v.Z,{children:(0,z.jsx)(y.Z,{id:"forms.StudyTimeLabel"})}),(0,z.jsx)(N.ju,{name:"studyTime",id:"studyTime",value:r.studyTime,options:m.Zp,onChange:l,onBlur:a,onClick:ge(r.studyTime)}),s.studyTime&&n.studyTime?(0,z.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:s.studyTime}):null]}),(0,z.jsxs)(b.Z,{className:"form-group has-float-label mt-5  error-l-150",children:[(0,z.jsx)(v.Z,{children:(0,z.jsx)(y.Z,{id:"forms.educationYearLabel"})}),(0,z.jsx)(N.ju,{name:"educationalYear",id:"educationalYear",options:m.Ar,onChange:l,onBlur:a,onClick:Ne(r.educationalYear)}),s.educationalYear&&n.educationalYear?(0,z.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:s.educationalYear}):null]})]}),(0,z.jsxs)(S.F,{xxs:"6",children:[(0,z.jsxs)(b.Z,{className:"form-group has-float-label error-l-150 ",children:[(0,z.jsx)(v.Z,{children:(0,z.jsx)(y.Z,{id:"marks.ClassLabel"})}),(0,z.jsx)(N.ju,{name:"classs",id:"classs",value:r.classs,options:P,onChange:l,onBlur:a,onClick:he(r.classs),required:!0}),s.classs&&n.classs?(0,z.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:s.classs}):null]}),(0,z.jsxs)(b.Z,{className:"form-group has-float-label mt-5 error-l-150",children:[(0,z.jsx)(v.Z,{children:(0,z.jsx)(y.Z,{id:"forms.studyDepartment"})}),(0,z.jsx)(N.ju,{name:"department",id:"department",value:r.department,options:V,onChange:l,onBlur:a,onClick:oe(r.department),required:!0}),s.department&&n.department?(0,z.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:s.department}):null]}),(0,z.jsxs)(b.Z,{className:"form-group has-float-label mt-5 error-l-150",children:[(0,z.jsx)(v.Z,{children:(0,z.jsx)(y.Z,{id:"marks.SubjectLabel"})}),(0,z.jsx)(N.ju,{name:"subject",id:"subject",value:r.subject,options:K,onChange:l,onBlur:a,onClick:pe(r.subject),required:!0}),s.subject&&n.subject?(0,z.jsx)("div",{className:"invalid-feedback d-block bg-danger text-white ",children:s.subject}):null]})]})]}),(0,z.jsx)(Z.Z,{children:(0,z.jsx)(S.F,{children:(0,z.jsx)(g.Z,{onClick:i,color:"primary",className:"float-right  buttonStyle",size:"lg",style:{margin:"2% 0% 10% 6%"},children:(0,z.jsx)("span",{className:"label",children:(0,z.jsx)(y.Z,{id:"button.Next"})})})})})]})}})})]})})}}}]);
//# sourceMappingURL=marks-register.97c48599.chunk.js.map