"use strict";(self.webpackChunktveta_online=self.webpackChunktveta_online||[]).push([[3975],{95414:function(t,e,n){var a=n(28563),i=n.n(a),r=n(50390);e.Z=function(t,e){var n=(0,r.useRef)(null);n.current=e,(0,r.useEffect)((function(){return i().bind(t,(function(t,e){"function"===typeof n.current&&n.current(t,e),t.preventDefault()})),function(){i().unbind(t)}}),[t])}},17203:function(t,e,n){n.r(e);n(93433);var a=n(1413),i=n(74165),r=n(15861),l=n(29439),s=n(50390),u=n(830),o=n(7556),d=n(95414),c=n(32121),p=n(60652),f=n(64884),v=n(94048),h=n(74793),m=n(16295),g=n(39873),Z=n(83882),x=n(62559),S=p.Z.API_URL;"".concat(S,"/cakes/paging"),"".concat(S,"/api/"),"".concat(S,"/api/student_institutes/"),"".concat(S,"/institute/"),"".concat(S,"/api/stdatten/");e.default=function(t){t.match;var e=(0,s.useContext)(Z.V),n=(e.provinces,e.institutes),p=e.departments,S=(0,s.useState)(!1),b=(0,l.Z)(S,2),j=b[0],_=b[1],w=(0,s.useState)("thumblist"),y=(0,l.Z)(w,2),I=(y[0],y[1],(0,s.useState)(1)),k=(0,l.Z)(I,2),N=(k[0],k[1],(0,s.useState)(20)),z=(0,l.Z)(N,2),C=(z[0],z[1],(0,s.useState)({column:"title",label:"Product Name"})),F=(0,l.Z)(C,2),E=(F[0],F[1],(0,s.useState)(!1)),A=(0,l.Z)(E,2),P=(A[0],A[1],(0,s.useState)(0)),T=(0,l.Z)(P,2),V=(T[0],T[1],(0,s.useState)(1)),Y=(0,l.Z)(V,2),B=(Y[0],Y[1],(0,s.useState)("")),L=(0,l.Z)(B,2),R=(L[0],L[1],(0,s.useState)([])),J=(0,l.Z)(R,2),O=J[0],D=J[1],U=(0,s.useState)([]),H=(0,l.Z)(U,2),M=H[0],X=H[1],q=(0,s.useState)(null),G=(0,l.Z)(q,2),K=(G[0],G[1],(0,s.useState)(0)),Q=(0,l.Z)(K,2),W=(Q[0],Q[1],(0,s.useState)("")),$=(0,l.Z)(W,2),tt=$[0],et=($[1],(0,s.useState)([])),nt=(0,l.Z)(et,2),at=nt[0],it=nt[1],rt=(0,s.useState)(!1),lt=(0,l.Z)(rt,2),st=lt[0],ut=lt[1],ot=(0,s.useState)(""),dt=(0,l.Z)(ot,2),ct=(dt[0],dt[1],(0,s.useState)("")),pt=(0,l.Z)(ct,2),ft=(pt[0],pt[1],(0,s.useState)("")),vt=(0,l.Z)(ft,2),ht=(vt[0],vt[1],(0,s.useState)({column:"all",label:"\u062c\u0646\u06cc\u0633\u062a"})),mt=(0,l.Z)(ht,2),gt=(mt[0],mt[1],(0,s.useState)({column:"all",label:"\u0648\u0644\u0627\u06cc\u062a"})),Zt=(0,l.Z)(gt,2),xt=(Zt[0],Zt[1],(0,s.useState)({pagination:{current:1,pageSize:5}})),St=(0,l.Z)(xt,2),bt=St[0],jt=St[1],_t=(0,s.useState)(!1),wt=(0,l.Z)(_t,2),yt=wt[0],It=wt[1],kt=function(){var t=(0,r.Z)((0,i.Z)().mark((function t(){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.Z)("students/stdatten/","",null);case 2:e=t.sent,console.log("ATTENDANCE: ",e.data),e.data&&200===e.status?(it(e.data),_(!0),console.log("resonse.data attendance",e.data)):console.log("Attendance error: "+e.status);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function Nt(){return zt.apply(this,arguments)}function zt(){return zt=(0,r.Z)((0,i.Z)().mark((function t(){var e,n,r,l,s,u,o=arguments;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:{},ut(!0),n="students/stdatten/",tt&&(e.institute=tt.value,n="students/student_institutes/"),console.log("institute is: ",tt,"isFilter",yt),r=(0,a.Z)((0,a.Z)({},e),{},{page:yt?e.page:bt.pagination.current,page_size:bt.pagination.pageSize||null}),t.prev=6,t.next=9,(0,c.Z)(n,null,null,r);case 9:l=t.sent,ut(!1),l.data&&200===l.status?(X(tt?null===l||void 0===l||null===(u=l.data)||void 0===u?void 0:u.map((function(t){return(0,a.Z)((0,a.Z)({},t.student),{},{institute:t.institute})})):l.data.results),jt((0,a.Z)((0,a.Z)({},bt),{},{pagination:(0,a.Z)((0,a.Z)({},bt.pagination),{},{total:null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.count})}))):console.log("students error"),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),console.log("error: ",t.t0);case 17:case"end":return t.stop()}}),t,null,[[6,14]])}))),zt.apply(this,arguments)}var Ct=function(){var t=(0,r.Z)((0,i.Z)().mark((function t(e){var n,r,l,s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:It(!0),jt((0,a.Z)((0,a.Z)({},bt),{},{pagination:(0,a.Z)((0,a.Z)({},bt.pagination),{},{current:1})})),(s={page:1}).institute=null===(n=e.filterInstitute)||void 0===n?void 0:n.value,s.department=null===(r=e.department)||void 0===r?void 0:r.value,s.educational_year=null===(l=e.educationalYear)||void 0===l?void 0:l.value,s.id=e.filterId||null,Nt(s);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){Nt()}),[yt?null:JSON.stringify(bt)]);(0,s.useEffect)((function(){kt(),console.log("ATT: ",at)}),[]);(0,d.Z)(["ctrl+a","command+a"],(function(){var t;t=!1,O.length>=M.length?t&&D([]):D(M.map((function(t){return t.id}))),document.activeElement.blur()})),(0,d.Z)(["ctrl+d","command+d"],(function(){return D([]),!1}));return console.log("items",M),j?(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"disable-text-selection",children:[(0,x.jsx)("h1",{children:"\u062f \u062d\u0627\u0636\u0631\u06cc \u0644\u0633\u062a/\u0644\u0633\u062a \u062d\u0627\u0636\u0631\u06cc"}),(0,x.jsx)("br",{}),(0,x.jsx)("div",{style:{padding:10,display:"flex"},children:(0,x.jsx)(m.J9,{initialValues:{filterId:"",filterInstitute:[],educationalYear:[],department:[]},onSubmit:Ct,children:function(t){var e=t.values,a=t.setFieldValue,i=t.handleSubmit,r=t.setFieldTouched,l=t.resetForm;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(f.Z,{className:"form-group has-float-label error-l-150 w-100 ",children:[(0,x.jsx)(v.Z,{children:"\u0627\u0646\u0633\u062a\u06cc\u062a\u0648\u062a"}),(0,x.jsx)(g.ju,{placeholder:"\u0627\u0646\u0633\u062a\u06cc\u062a\u0648\u062a",name:"filterInstitute",options:n,value:e.filterInstitute,onChange:a,onBlur:r})]}),(0,x.jsxs)(f.Z,{className:"form-group has-float-label error-l-150 w-100 ",children:[(0,x.jsx)(v.Z,{children:"\u062f\u067e\u0627\u0631\u062a\u0645\u0646\u062a"}),(0,x.jsx)(g.ju,{name:"department",id:"department",options:p,value:e.department,onChange:a,onBlur:r})]}),(0,x.jsxs)(f.Z,{className:"form-group has-float-label error-l-150 w-100 ",children:[(0,x.jsx)(v.Z,{children:"\u0633\u0627\u0644 \u062a\u062d\u0635\u06cc\u0644"}),(0,x.jsx)(g.ju,{name:"educationalYear",id:"educationalYear",options:u.Ar,value:e.educationalYear,onChange:a,onBlur:r})]}),(0,x.jsxs)(f.Z,{className:"form-group",style:{display:"flex"},children:[(0,x.jsx)("button",{className:"btn btn-secondary",onClick:i,children:"Filter"}),(0,x.jsx)("button",{type:"button",className:"btn btn-warning",onClick:function(){return function(t){t({values:{filterId:"",filterInstitute:[],educationalYear:[],department:[]}}),It(!1),Nt()}(l)},children:"Reset"})]})]})}})}),(0,x.jsx)(o.Z,{style:{fontSize:20},size:"large",columns:[{title:"\u0634\u0645\u0627\u0631\u0647",dataIndex:"id",width:"5%"},{title:"\u0646\u0648\u0645/\u0646\u0627\u0645",dataIndex:"name",width:"15%"},{title:"\u0627\u0646\u0633\u062a\u06cc\u062a\u0648\u062a",dataIndex:"institute",width:"10%"},{title:"\u062f\u067e\u0627\u0631\u062a\u0645\u0646\u062a",dataIndex:"department",width:"10%"},{title:"\u062d\u0627\u0636\u0631",dataIndex:"present_hours",width:"10%"},{title:"\u0636\u0631\u0648\u0631\u06cc",dataIndex:"necessary_work_hours",width:"10%"},{title:"\u0645\u0631\u06cc\u0636\u06cc",dataIndex:"sickness_hours",width:"10%"},{title:"\u063a\u06cc\u0631 \u062d\u0627\u0636\u0631",dataIndex:"absent_hours",width:"10%"},{title:"\u0633\u0627\u0644",dataIndex:"year",width:"10%"}],pagination:bt.pagination,loading:st,onChange:function(t,e,n){var i;It(!1),jt((0,a.Z)({pagination:t,filter:e},n)),t.pageSize!==(null===(i=bt.pagination)||void 0===i?void 0:i.pageSize)&&X([])},dataSource:null===M||void 0===M?void 0:M.map((function(t,e){var a,i;return{key:e,id:t.id,name:(0,x.jsx)(h.Z,{to:"student/".concat(t.id),children:t.student.name}),institute:null===(a=n.find((function(e){return e.value==t.institute})))||void 0===a?void 0:a.label,department:null===p||void 0===p||null===(i=p.find((function(e){return e.value==t.department})))||void 0===i?void 0:i.label,present_hours:t.present_hours,necessary_work_hours:t.necessary_work_hours,absent_hours:t.absent_hours,sickness_hours:t.sickness_hours,year:t.educational_year}}))})]})}):(0,x.jsx)("div",{className:"loading"})}},81624:function(t,e,n){n.r(e);var a=n(74165),i=n(15861),r=n(1413),l=n(29439),s=n(50390),u=n(7556),o=n(32121),d=n(94149),c=n(95414),p=n(83882),f=n(23423),v=n(830),h=n(6369),m=n(39873),g=n(16295),Z=n(62559),x=[{title:"\u0646\u0645\u0628\u0631 \u0627\u0633\u0627\u0633",dataIndex:"student_id",width:"5%"},{title:"\u062a\u0630\u06a9\u0631\u0647",dataIndex:"registration_number",width:"15%"},{title:"\u0646\u0648\u0645/\u0646\u0627\u0645",dataIndex:"name",width:"15%"},{title:"\u0646\u0627\u0645 \u067e\u062f\u0631/ \u062f \u067e\u0644\u0627\u0631 \u0646\u0648\u0645",dataIndex:"father_name",width:"10%"},{title:"\u062c\u0646\u0633\u06cc\u062a",dataIndex:"gender",width:"8%"},{title:"\u0648\u0644\u0627\u06cc\u062a",dataIndex:"province",width:"8%"},{title:"\u0634\u0645\u0627\u0631\u0647 \u062a\u0644\u0641\u0648\u0646/\u062a\u0644\u0641\u0648\u0646 \u0634\u0645\u06cc\u0631\u0647",dataIndex:"phone_number",width:"10%"},{title:"\u0634\u0645\u0648\u0644\u06cc\u062a \u0627\u0646\u0633\u062a\u06cc\u062a\u0648\u062a",dataIndex:"institute_enrollment",width:"17%"},{title:"\u062d\u0627\u0644\u062a",dataIndex:"student_type",width:"8%"},{title:"\u0627\u067e\u0689\u06cc\u067c",dataIndex:"action"}];e.default=function(){var t=(0,s.useContext)(p.V),e=t.provinces,n=t.institutes,S=(0,s.useState)({pagination:{current:1,pageSize:10}}),b=(0,l.Z)(S,2),j=b[0],_=b[1],w=(0,s.useState)([]),y=(0,l.Z)(w,2),I=y[0],k=y[1],N=(0,s.useState)([]),z=(0,l.Z)(N,2),C=z[0],F=z[1],E=(0,s.useState)(!1),A=(0,l.Z)(E,2),P=A[0],T=A[1],V=(0,s.useState)(!1),Y=(0,l.Z)(V,2),B=Y[0],L=Y[1];console.log(B);function R(){return J.apply(this,arguments)}function J(){return J=(0,i.Z)((0,a.Z)().mark((function t(){var e,n,i,l,s,u=arguments;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:{},console.log("PARAMSSSSSSSSSS: ",e),T(!0),"students/",n=(0,r.Z)((0,r.Z)({},e),{},{page:B?e.page:j.pagination.current,page_size:j.pagination.pageSize||null}),t.prev=5,t.next=8,(0,o.Z)("students/",null,null,n);case 8:(i=t.sent).data&&200===i.status?(e.institute?F(null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.map((function(t){return(0,r.Z)((0,r.Z)({},t.student),{},{institute:t.institute})}))):F(i.data.results),_((0,r.Z)((0,r.Z)({},j),{},{pagination:(0,r.Z)((0,r.Z)({},j.pagination),{},{total:null===i||void 0===i||null===(l=i.data)||void 0===l?void 0:l.count})}))):console.log("students error"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),console.log("error: ",t.t0);case 15:return t.prev=15,T(!1),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[5,12,15,18]])}))),J.apply(this,arguments)}(0,c.Z)(["ctrl+a","command+a"],(function(){var t;t=!1,I.length>=C.length?t&&k([]):k(C.map((function(t){return t.id}))),document.activeElement.blur()})),(0,c.Z)(["ctrl+d","command+d"],(function(){return k([]),!1}));var O={male:"\u0646\u0627\u0631\u06cc\u0646\u0647/ \u0645\u0630\u06a9\u0631",female:"\u069a\u0681\u06cc\u0646\u0647/ \u0645\u0648\u064c\u0646\u062b"},D=function(){var t=(0,i.Z)((0,a.Z)().mark((function t(e){var n,i,l;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("FILTER VALUES"),L(!0),_((0,r.Z)((0,r.Z)({},j),{},{pagination:(0,r.Z)((0,r.Z)({},j.pagination),{},{current:1})})),(l={page:1}).institute_enrollment__institute=null===(n=e.filterInstitute)||void 0===n?void 0:n.value,l.current_province=null===(i=e.filterProvince)||void 0===i?void 0:i.value,l.search=e.search||null,l.student_id=e.filterId||null,R(l);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){R()}),[B?null:JSON.stringify(j)]);return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)("div",{className:"disable-text-selection",children:[(0,Z.jsx)("h1",{children:"\u062f \u0634\u0627\u06af\u0631\u062f \u0644\u0633\u062a/\u0644\u0633\u062a \u0634\u0627\u06af\u0631\u062f\u0627\u0646"}),(0,Z.jsx)("br",{}),(0,Z.jsx)("div",{style:{padding:10,display:"flex"},children:(0,Z.jsx)(g.J9,{initialValues:{filterId:"",filterInstitute:[],filterProvince:[]},onSubmit:D,children:function(t){var a=t.values,i=t.setFieldValue,r=t.handleSubmit,l=t.setFieldTouched,s=t.resetForm;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(g.gN,{className:"form-control fieldStyle",name:"search",placeholder:"\u062c\u0633\u062a\u062c\u0648/\u067e\u0644\u067c\u0646\u0647"}),(0,Z.jsx)(g.gN,{className:"form-control fieldStyle",name:"filterId",placeholder:"\u0627\u06cc\u062f\u06cc",type:"number"}),(0,Z.jsx)(m.ju,{className:"w-100",placeholder:"\u0648\u0644\u0627\u06cc\u062a",name:"filterProvince",options:e,value:a.filterProvince,onChange:i,onBlur:l}),(0,Z.jsx)(m.ju,{className:"w-100",placeholder:"\u0627\u0646\u0633\u062a\u06cc\u062a\u0648\u062a",name:"filterInstitute",options:n,value:a.filterInstitute,onChange:i,onBlur:l}),(0,Z.jsx)("button",{className:"btn btn-secondary",onClick:r,children:"\u0641\u0644\u067c\u0631"}),(0,Z.jsx)("button",{type:"button",className:"btn btn-warning",onClick:function(){return function(t){t({values:{filterId:"",search:"",filterInstitute:[],filterProvince:[]}}),L(!1),R()}(s)},children:"\u0631\u06cc\u0633\u06cc\u067c"})]})}})}),(0,Z.jsx)(u.Z,{style:{fontSize:20},size:"large",columns:x,pagination:j.pagination,onChange:function(t,e,n){var a;L(!1),_((0,r.Z)({pagination:t,filter:e},n)),t.pageSize!==(null===(a=j.pagination)||void 0===a?void 0:a.pageSize)&&F([])},loading:P,dataSource:null===C||void 0===C?void 0:C.map((function(t,a){var i,r;return{key:a,student_id:t.student_id,registration_number:t.registration_number,name:(0,Z.jsx)(h.OL,{to:"student/".concat(t.id),style:{width:"10%"},children:t.name}),father_name:t.father_name,gender:O[t.gender],province:null===(i=e.find((function(e){return e.value==t.current_province})))||void 0===i?void 0:i.label,phone_number:t.phone_number,institute_enrollment:null===(r=t.institute_enrollment)||void 0===r?void 0:r.map((function(t){var e;return(0,Z.jsx)("div",{style:{display:"flex"},children:(0,Z.jsx)("p",{style:{fontSize:18,color:"green"},children:(null===(e=n.find((function(e){return e.value==t.institute&&"inprogress"==t.status})))||void 0===e?void 0:e.label)||null})})})),student_type:v.f7.map((function(e){if(e.value==t.status)return(0,Z.jsx)("div",{className:"mb-1 text-small",style:{fontSize:"20px",width:"10%"},children:(0,Z.jsx)(d.Z,{color:"dismissed"==e.value?"danger":"inprogress"==e.value||"active"==e.value?"success":"freeze"==e.value?"secondary":"warning",pill:!0,children:e.label})})})),description:t.description,action:(0,Z.jsx)(h.OL,{to:"/app/students/student-update/".concat(t.id),children:(0,Z.jsx)("div",{children:(0,Z.jsx)(f.HlX,{color:"green",outline:!0,style:{fontSize:"20px"},id:"updateIcon"})})})}}))})]})})}}}]);
//# sourceMappingURL=student-list.42e4de46.chunk.js.map