"use strict";(self.webpackChunktveta_online=self.webpackChunktveta_online||[]).push([[3567],{2896:function(){},39873:function(e,s,n){n.d(s,{T5:function(){return h},ju:function(){return u},qu:function(){return x}});var a=n(1413),r=n(45987),t=(n(50390),n(91619)),l=n(37671),i=(n(65620),n(89538),n(11216),n(78112),n(21404)),c=(n(68639),n(57298)),d=n(62559),o=["name","value","onChange","onBlur"],u=function(e){var s=e.name,n=e.value,a=e.options,r=e.isMulti,i=e.className,c=e.onChange,o=e.onBlur,u=(e.onClick,e.defaultValue),h=e.isDisabled,x=e.isLoading,m=e.isClearable,j=e.isRtl,f=e.isSearchable,Z=e.placeholder;return(0,d.jsx)(t.ZP,{className:"react-select ".concat(i),classNamePrefix:"react-select",placeholder:Z||(0,d.jsx)(l.Z,{id:"forms.EducationLevelDefaultValue"}),options:a,isMulti:r,initial:!0,onChange:function(e){c(s,e)},onBlur:function(){o(s,!0)},value:n,defaultValue:u,isDisabled:h,isLoading:x,isClearable:m,isRtl:j,isSearchable:f})},h=function(e){var s=e.name,n=e.value,t=e.onChange,l=(e.onBlur,(0,r.Z)(e,o));return(0,d.jsx)(c.Z,(0,a.Z)({name:s,value:n,onChange:t,style:{height:48,borderRadius:0}},l))},x=function(e){var s=e.name,n=e.value,a=e.className,r=e.onChange,t=e.onBlur;return(0,d.jsx)(i.ZP,{name:s,className:a,selected:n,onChange:function(e){r(s,e)},onBlur:function(e){t(s,!0)}})}},69909:function(e,s,n){n.r(s);var a=n(74165),r=n(15861),t=n(29439),l=n(50390),i=n(16295),c=n(32121),d=n(830),o=(n(2896),n(16356)),u=n(22834),h=n(49360),x=n(31833),m=n(14237),j=n(14778),f=n(94048),Z=n(16778),b=n(64884),p=n(37671),v=n(16905),g=n(39873),N=n(83882),k=n(62559),y=(h.Ry().shape({District:h.Z_().required((0,k.jsx)(p.Z,{id:"forms.DistrictErr"})),Village:h.Z_().required((0,k.jsx)(p.Z,{id:"forms.VillageErr"}))}),[{value:"in_dorm",label:"\u0628\u062f\u0644 \u0639\u0627\u0634\u0647"},{value:"cash",label:"\u0628\u062f\u06cc\u0644 \u0639\u0627\u0634\u0647"}]);s.default=function(e){var s={Province:{value:"",label:(0,k.jsx)(p.Z,{id:"forms.EducationLevelDefaultValue"})}},n=(0,l.useState)([]),h=(0,t.Z)(n,2),C=h[0],_=h[1],S=(0,l.useState)(),F=(0,t.Z)(S,2),B=F[0],L=F[1],w=(0,l.useState)(),T=(0,t.Z)(w,2),V=T[0],P=T[1],R=(0,l.useState)(),q=(0,t.Z)(R,2),D=q[0],I=q[1],Y=(0,l.useState)(),E=(0,t.Z)(Y,2),z=E[0],M=E[1],A=(0,l.useState)(!1),H=(0,t.Z)(A,2),J=H[0],O=H[1],G=(0,l.useState)(!0),K=(0,t.Z)(G,2),Q=K[0],U=K[1],W=(0,l.useContext)(N.V),X=W.provinces,$=W.districts,ee=W.dorms;console.log("provinces context",X),console.log("districts from context",$);var se=function(e){U(e)},ne=function(e){_(e.target.value)},ae=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var s,n,r,t,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)("students/?student_id=".concat(C),"",null);case 2:if(!(s=e.sent).data||200!==s.status){e.next=9;break}console.log("student",s.data.results),L(s.data.results),n=s.data.results[0].id,e.next=11;break;case 9:return console.log("student error"),e.abrupt("return");case 11:return e.next=13,(0,c.Z)("students/".concat(n,"/institute"),"",null);case 13:if(!(r=e.sent).data||200!==r.status){e.next=19;break}console.log("institute response",r.data),P(r.data.institute),e.next=20;break;case 19:case 31:return e.abrupt("return");case 20:return e.next=22,(0,c.Z)("students/".concat(n,"/department"),"",null);case 22:return(t=e.sent).data&&200===t.status?I(t.data.department):console.log("student department error"),e.next=26,(0,c.Z)("students/".concat(n,"/class"),"",null);case 26:if(!(l=e.sent).data||200!==l.status){e.next=31;break}M(l.data.classs),e.next=32;break;case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(e,s){var n=s||"";switch(e){case"success":u.fn.success("\u0634\u0627\u06af\u0631\u062f \u0645\u0648\u0641\u0642\u0627\u0646\u0647 \u0644\u06cc\u0644\u06cc \u062a\u0647 \u0631\u062c\u0633\u062a\u0631 \u0634\u0648","\u0645\u0648\u0641\u0642\u06cc\u062a",3e3,null,null,n);break;case"error":u.fn.error("\u0634\u0627\u06af\u0631\u062f \u062b\u0628\u062a \u0646\u0634\u0648\u060c \u0628\u06cc\u0627 \u06a9\u0648\u0634\u0634 \u0648\u06a9\u0631\u06cc","\u062e\u0637\u0627",5e3,(function(){alert("callback")}),null,n);break;default:u.fn.info("Info message")}},te=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(s){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)("students/student_dorms_create/","POST",s);case 2:(n=e.sent)?(re("success","filled"),O(!0),L(""),console.log("success message",n.data)):(re("error","filled"),console.log("class error"));case 4:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}();return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(x.Z,{children:[(0,k.jsx)("h3",{className:"mt-5 m-5",children:(0,k.jsx)(p.Z,{id:"dorm.StudentRegisterTitle"})}),(0,k.jsx)(m.Z,{children:J?(0,k.jsx)("div",{className:"wizard-basic-step text-center pt-3 ",style:{minHeight:"400px"},children:(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"mb-2",children:(0,k.jsx)(p.Z,{id:"wizard.content-thanks"})}),(0,k.jsx)("h3",{children:(0,k.jsx)(p.Z,{id:"wizard.registered"})}),(0,k.jsx)(Z.Z,{className:"m-5 bg-primary",onClick:function(){O(!1),U(!0)},children:(0,k.jsx)(p.Z,{id:"button.back"})})]})}):(0,k.jsx)(i.J9,{initialValues:s,onSubmit:function(e){var s={dorm:e.dorm.value,student:B[0].id,dorm_type:e.dormType.value,educational_year:e.educationalYear.value};console.log("data of dorm",s),te(s)},children:function(e){var s=e.errors,n=e.touched,a=e.values,r=e.setFieldTouched,t=e.setFieldValue;return(0,k.jsx)(i.l0,{className:"av-tooltip tooltip-label-bottom",children:Q?(0,k.jsxs)("div",{children:[" ",(0,k.jsxs)(j.Z,{className:"justify-content-center inlineBlock",children:[(0,k.jsx)(f.Z,{children:(0,k.jsx)(p.Z,{id:"search.studentIdSearchLabel"})}),(0,k.jsxs)("div",{class:"input-group mb-3",children:[(0,k.jsx)("div",{class:"input-group-prepend",children:(0,k.jsx)("button",{class:"btn btn-outline-secondary",type:"button",onClick:ae,children:(0,k.jsx)(p.Z,{id:"search.studentId"})})}),(0,k.jsx)("input",{type:"text",class:"form-control",placeholder:"","aria-label":"","aria-describedby":"basic-addon1",onChange:ne})]}),(0,k.jsx)(v.F,{style:{paddingInline:"3%"},children:B?(0,k.jsxs)("div",{className:"border rounded",children:[(0,k.jsx)(f.Z,{children:(0,k.jsx)("h6",{className:"mt-5 m-5",children:(0,k.jsx)(p.Z,{id:"dorm.SearchResult"})})})," ",(0,k.jsxs)(j.Z,{children:[(0,k.jsx)(v.F,{xxs:"1"}),(0,k.jsxs)(v.F,{children:[(0,k.jsx)("img",{src:B[0].photo||o,alt:"Photo",width:"10%"})," "]})]}),(0,k.jsx)(j.Z,{children:(0,k.jsx)(v.F,{children:(0,k.jsxs)("div",{children:[(0,k.jsxs)(j.Z,{className:"justify-content-center border border-primary rounded m-5",children:[(0,k.jsxs)(v.F,{className:" p-5  border rounded",xxs:"",children:[(0,k.jsx)(f.Z,{children:"\u062f \u0634\u0627\u06af\u0631\u062f \u0627\u06cc\u062f\u06cc / \u0627\u06cc\u062f\u06cc \u0634\u0627\u06af\u0631\u062f"}),(0,k.jsx)("h3",{children:B[0].student_id}),(0,k.jsx)(f.Z,{children:(0,k.jsx)(p.Z,{id:"teacher.NameLabel"})}),(0,k.jsx)("h3",{children:B[0].name+"  "+B[0].last_name}),(0,k.jsx)(f.Z,{children:(0,k.jsx)(p.Z,{id:"teacher.FatherNameLabel"})}),(0,k.jsx)("h3",{children:B[0].father_name}),(0,k.jsx)(f.Z,{children:(0,k.jsx)(p.Z,{id:"teacher.PhoneNoLabel"})}),(0,k.jsx)("h3",{children:B[0].phone_number}),(0,k.jsx)(f.Z,{children:"\u062f\u0627\u06cc\u0645\u06cc \u0627\u062f\u0631\u0633 / \u0627\u062f\u0631\u0633 \u062f\u0627\u06cc\u0645\u06cc"}),(0,k.jsx)("h3",{children:X.filter((function(e){return e.value===B[0].main_province}))[0].label+" - "+$.filter((function(e){return e.value===B[0].main_district}))[0].label+" - "+B[0].main_village}),(0,k.jsx)(f.Z,{children:"\u0627\u0648\u0633\u0646\u06cc \u0627\u062f\u0631\u0633 / \u0627\u062f\u0631\u0633 \u0641\u0639\u0644\u06cc"}),(0,k.jsx)("h3",{children:X.filter((function(e){return e.value===B[0].main_province}))[0].label+" - "+$.filter((function(e){return e.value===B[0].main_district}))[0].label+" - "+B[0].main_village})]}),V&&z&&D&&(0,k.jsxs)(v.F,{className:"p-5 border rounded",children:[(0,k.jsx)(f.Z,{children:(0,k.jsx)(p.Z,{id:"forms.InstituteLabel"})}),(0,k.jsx)("h3",{children:V.name}),(0,k.jsx)(f.Z,{children:"\u062f \u0627\u0646\u0633\u062a\u06cc\u0648\u062a \u0627\u062f\u0631\u0633"}),(0,k.jsx)("h3",{children:V.province.native_name+" - "+V.district.native_name+" - "+V.village}),(0,k.jsx)(f.Z,{children:(0,k.jsx)(p.Z,{id:"forms.FieldLabel"})}),(0,k.jsx)("h3",{children:D.name}),(0,k.jsx)(f.Z,{children:(0,k.jsx)(p.Z,{id:"marks.ClassLabel"})}),(0,k.jsx)("h3",{children:z.name}),(0,k.jsx)(f.Z,{children:(0,k.jsx)(p.Z,{id:"field.SemesterLabel"})}),(0,k.jsx)("h3",{children:z.semester})]})]}),(0,k.jsx)(j.Z,{children:(0,k.jsx)(v.F,{children:(0,k.jsx)(Z.Z,{onClick:function(){return se(!1)},className:"float-right m-5  ",style:{paddingInline:"30px"},children:(0,k.jsx)(p.Z,{id:"forms.ConfirmButton"})})})})]})})})]}):(0,k.jsxs)("div",{children:[(0,k.jsx)(f.Z,{children:(0,k.jsx)("h6",{className:"mt-5 m-5",children:(0,k.jsx)(p.Z,{id:"dorm.SearchResult"})})}),(0,k.jsx)(j.Z,{className:"justify-content-center mb-5",children:(0,k.jsx)(v.F,{xxs:"6",children:(0,k.jsx)("h5",{className:"m-5",children:(0,k.jsx)(p.Z,{id:"forms.NoData"})})})})]})})]})]}):(0,k.jsx)("div",{children:(0,k.jsx)(j.Z,{className:"mb-4 justify-content-center",children:(0,k.jsxs)(v.F,{xxs:"8",children:[(0,k.jsxs)("div",{className:"square border border-dark p-3",children:[(0,k.jsx)("h6",{className:" mb-4",children:(0,k.jsx)(p.Z,{id:"forms.StudentResidentsPlace"})}),(0,k.jsxs)(b.Z,{className:"form-group has-float-label ",children:[(0,k.jsx)(f.Z,{children:"\u0644\u06cc\u0644\u0647"}),(0,k.jsx)(g.ju,{name:"dorm",id:"dorm",value:a.dorm,options:ee,onChange:t,onBlur:r,required:!0}),s.dorm&&n.dorm?(0,k.jsx)("div",{className:"invalid-feedback d-block",children:s.dorm}):null]}),(0,k.jsxs)(b.Z,{className:"form-group has-float-label",children:[(0,k.jsx)(f.Z,{children:"\u0646\u0648\u0639"}),(0,k.jsx)(g.ju,{name:"dormType",id:"dormType",value:a.dormType,options:y,onChange:t,onBlur:r,required:!0}),s.dormType&&n.dormType?(0,k.jsx)("div",{className:"invalid-feedback d-block",children:s.dormType}):null]}),(0,k.jsxs)(b.Z,{className:"form-group has-float-label",children:[(0,k.jsx)(f.Z,{children:"\u062a\u0639\u0644\u06cc\u0645\u06cc \u06a9\u0627\u0644/ \u0633\u0627\u0644 \u062a\u0639\u0644\u06cc\u0645\u06cc"}),(0,k.jsx)(g.ju,{name:"educationalYear",id:"educationalYear",value:a.educationalYear,options:d.Ar,onChange:t,onBlur:r,required:!0}),s.educationalYear&&n.educationalYear?(0,k.jsx)("div",{className:"invalid-feedback d-block",children:s.educationalYear}):null]})]}),(0,k.jsx)(Z.Z,{onClick:function(){return se(!0)},className:"m-2 m-5",children:"\u0634\u0627\u062a\u0647/ \u0639\u0642\u0628"}),(0,k.jsx)(Z.Z,{style:{paddingInline:"30px"},className:"float-right m-2 mt-5",type:"submit",children:(0,k.jsx)(p.Z,{id:"forms.SubimssionButton"})})]})})})})}})})]})})}}}]);
//# sourceMappingURL=student-register.4bd93482.chunk.js.map